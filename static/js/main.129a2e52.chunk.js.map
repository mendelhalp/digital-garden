{"version":3,"sources":["images/logo192.png","model/UserModel.jsx","utils/IsEnterPressed.jsx","utils/isEmailValid.jsx","components/LoginModal/LoginModal.jsx","utils/ActiveUserContext.jsx","utils/addGarden.jsx","utils/signup.jsx","utils/isPasswordValid.jsx","components/SignupModal/SignupModal.jsx","pages/HomePage/HomePage.jsx","components/GalleryCard/GalleryCard.jsx","components/DafKesherCard/DafKesherCard.jsx","utils/ActiveGardenContext.jsx","pages/MyGardenPage/MyGardenPage.jsx","components/AddMainCard/AddMainCard.jsx","utils/createNewDafKesher.jsx","utils/updateDafKesherDetails.jsx","utils/createNewGallery.jsx","utils/updateGalleryDetails.jsx","utils/getHebrewDate.jsx","model/DafKesherModel.jsx","model/GalleryModel.jsx","components/MainCardEditorModal/MainCardEditorModal.jsx","utils/deleteDafKesher.jsx","utils/deleteGallery.jsx","utils/deleteImage.jsx","utils/updateDafKesherContent.jsx","components/DeleteWarningModal/DeleteWarningModal.jsx","pages/DapeyKesherPage/DapeyKesherPage.jsx","pages/GalleriesPage/GalleriesPage.jsx","utils/addImage.jsx","pages/ContactUsPage/ContactUsPage.jsx","components/ImageCard/ImageCard.jsx","components/ImageModal/ImageModal.jsx","components/ImageCard/AddImageCard.jsx","model/ImageModel.jsx","components/AddImage/AddImageModal.jsx","pages/GalleryPage/GalleryPage.jsx","components/StudyTopicBox/StudyTopicBox.jsx","utils/getRandomBgColor.jsx","components/MessageBox/MessageBox.jsx","components/MessageBox/AddMessageBox.jsx","components/StudyTopicBox/AddStudyTopicBox.jsx","components/TextEditor/TextEditor.jsx","components/DafKesherEditorModal/DafKesherEditorModal.jsx","pages/DafKesherPage/DafKesherPage.jsx","utils/getGreeting.jsx","components/TopNavbar/TopNavbar.jsx","utils/getGardenDetails.jsx","utils/getGardenData.jsx","utils/getGalleriesImages.jsx","App.js","reportWebVitals.js","index.js"],"names":["UserModel","parseUser","this","id","email","get","fname","lname","gardenId","role","isEnterPressed","e","key","isEmailValid","test","LoginModal","props","showModal","showSignupModal","handleCloseLogin","onLogin","useState","setEmail","pwd","setPwd","showError","setShowError","showEmailError","setShowEmailError","forgotPwdEmail","setForgotPwdEmail","showForgotPwdEmail","setShowForgotPwdEmail","showForgotPwdEmailError","setShowForgotPwdEmailError","showResetsecces","setShowResetsecces","showLoginSpinner","setShowLoginSpinner","cleanFormFields","login","a","Parse","User","logIn","close","ifEnterPressed","event","useEffect","Modal","size","show","onHide","centered","className","Header","Title","Body","Form","Group","controlId","Label","Control","type","placeholder","value","onChange","target","onKeyPress","Feedback","Button","variant","onClick","Card","requestPasswordReset","then","document","console","log","catch","error","Alert","Footer","Spinner","as","animation","aria-hidden","ActiveUserContext","createContext","name","year","logo","Gan","Object","extend","myNewGarden","set","File","save","response","addGarden","Query","parseGarden","user","signUp","res","signup","isPasswordValid","SignupModal","handleCloseSignup","activeUser","useContext","userFname","setUserFname","userLname","setUserLname","userEmail","setUserEmail","userPwd","setUserPwd","gardenName","setGardenName","gardenYear","setGardenYear","parentsEmail","setParentsEmail","parentsFname","setParentsFname","setLogo","logoUrl","setLogoUrl","showPwdError","setShowPwdError","isFormValid","setIsFormValid","showSignupSpinner","setShowSignupSpinner","showParentsLoginAlert","setShowParentsLoginAlert","URL","revokeObjectURL","garden","isRequierdFieldFull","to","logoView","Img","src","Heading","Row","Col","disabled","performSignup","split","Text","label","data-browse","accept","custom","newLogo","files","newLogoUrl","createObjectURL","HomePage","showLoginModal","setShowLoginModal","setShowSignupModal","redirectToMyGarden","setRedirectToMyGarden","handleLogin","alt","GalleryCard","gallery","handleEdit","handleDeleteClick","handlePublish","title","isReady","img","images","values","map","url","Check","checked","icon","faEdit","faTrashAlt","DafKesherCard","dafKesher","handleDuplicate","hebDate","faCopy","ActiveGardenContext","MyGardenPage","data","activeGarden","dapeyKesherView","dapeyKesher","sort","b","date","filter","x","index","md","lg","galleriesView","galleries","Container","sm","faNewspaper","href","faChevronLeft","faImages","AddMainCard","DafKesher","myNewDafKesher","Date","createNewDafKesher","dafKesherId","query","updateDafKesherDetails","Gallery","myGallery","createNewGallery","galleryId","updateGalleryDetails","unitsNames","tensNames","getHebrewDate","dateObj","monthNum","require","hebrewDate","month","HebrewYearName","yearNum","yearArr","taf","parseInt","i","push","length","splice","join","getHebrewYearName","hebrewMonthName","includes","dateNum","dateArr","dateName","getHebrewDateName","DafKesherModel","parseDafKesher","GalleryModel","parseGallery","MainCardEditorModal","modalTitle","cardType","handleUpdate","closeModal","cleanDataToEdit","setTitle","setDate","onSave","action","galleryToSend","toLocaleString","viewDate","destroy","deleteDafKesher","deleteGallery","imageId","Image","image","deleteImage","content","result","updateDafKesherContent","DeleteWarningModal","fullData","objectType","handleClose","newData","backdrop","keyboard","DapeyKesherPage","onUpdate","showMainCardEditorModal","setShowMainCardEditorModal","showDeleteAlert","setShowDeleteAlert","dafKesherToEdit","setDafKesherToEdit","addDafKesher","GalleriesPage","galleryToEdit","setGalleryToEdit","addGallery","myNewImage","addImage","ContactUsPage","setName","subject","setSubject","request","setRequest","useUserInfo","setUseUserInfo","setFiles","filesUrl","setFilesUrl","isFormSubmitted","setIsFormSubmitted","Promise","all","file","_url","emailjs","send","from_name","from_email","topic","message","file_links","toString","forEach","filesAmount","filesView","fileUrl","multiple","newFiles","newFilesUrl","CardColumns","ImageCard","ImageModal","selectedImage","onImageChange","xs","faChevronRight","AddImageCard","ImageModel","parseImage","AddImageModal","galleryTitle","setImages","imagesUrl","setImagesUrl","uploadedImages","imagesAmount","imagesView","imageUrl","newImages","newImagesUrl","GalleryPage","showImageModal","setShowImageModal","setSelectedImage","showAddImage","setShowAddImage","imageToEdit","setImageToEdit","useParams","updatedImages","onImageSelect","StudyTopicBox","onDeleteClick","onEditClick","headline","editIcon","editorState","getRandomBgColor","bgColors","Math","floor","random","MessageBox","bgColor","bg","text","AddMessageBox","AddStudyTopicBox","TextEditor","isReadOnly","EditorState","createEmpty","setEditorState","newState","createWithContent","convertFromRaw","JSON","parse","inlineStyle","RichUtils","toggleInlineStyle","contentState","getCurrentContent","stringify","convertToRaw","readOnly","handleKeyCommand","command","onTab","DafKesherEditorModal","isNew","setHeadline","setContent","DafKesherPage","showEditorModal","setShowEditorModal","contentToEdit","setContentToEdit","dafKesherData","studyTopics","messages","handleAddClick","handleEditClick","updatedDafKesherData","topicsView","addTopic","messagesView","addMessage","window","print","faCommentDots","getGreeting","hour","getHours","TopNavbar","onLogout","path","useLocation","pathname","greeting","Navbar","collapseOnSelect","expand","Brand","Toggle","aria-controls","Collapse","Nav","Link","active","parseGan","ganName","ganLogo","ganYear","gardenDetails","getGardenDetails","galleriesQuery","dapeyKesherQuery","equalTo","find","galleriesResults","dapeyKesherResults","galleriesArr","dapeyKesherArr","reduce","item","getGardenData","imgQuery","results","imagesArr","imagesObj","galleriesImagesObj","getGalleriesImages","App","current","setActiveUser","setActiveGarden","gardenData","setGardenData","newGalleries","keys","getGarden","init","updateGardenData","Provider","logOut","exact","loggedinUser","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","serverURL","initialize","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.129a2e52.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo192.f73b2edd.png\";","class UserModel {\r\n    constructor(parseUser){\r\n        this.id = parseUser.id;\r\n        this.email = parseUser.get('username');\r\n        this.fname = parseUser.get('fname');\r\n        this.lname = parseUser.get('lname');\r\n        this.gardenId = parseUser.get('gan').id;\r\n        this.role = parseUser.get('role');\r\n        this.parseUser = parseUser;\r\n    }\r\n}\r\n\r\nexport default UserModel;","const isEnterPressed = (e) => e.key === 'Enter' ? true : false;\r\n\r\nexport default isEnterPressed;","\r\nfunction isEmailValid(email) {\r\n    return /.+@.+\\..+/.test(email)\r\n}\r\n\r\nexport default isEmailValid;","import React, { useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport { Button, Modal, Form, Alert, Card, Spinner } from 'react-bootstrap';\r\nimport Parse from 'parse';\r\nimport UserModel from '../../model/UserModel';\r\nimport isEnterPressed from '../../utils/IsEnterPressed';\r\nimport isEmailValid from '../../utils/isEmailValid';\r\nimport './LoginModal.css';\r\n\r\nfunction LoginModal(props) {\r\n    const {showModal, showSignupModal, handleCloseLogin, onLogin} = props;\r\n    const [email, setEmail] = useState('');\r\n    const [pwd, setPwd] = useState('');\r\n    const [showError, setShowError] = useState(false);\r\n    const [showEmailError, setShowEmailError] = useState(false);\r\n    const [forgotPwdEmail, setForgotPwdEmail] = useState('');\r\n    const [showForgotPwdEmail, setShowForgotPwdEmail] = useState(false);\r\n    const [showForgotPwdEmailError, setShowForgotPwdEmailError] = useState(false);\r\n    const [showResetsecces, setShowResetsecces] = useState(false);\r\n    const [showLoginSpinner, setShowLoginSpinner] = useState(false);\r\n\r\n    function cleanFormFields () {\r\n        setEmail('');\r\n        setPwd('');\r\n        setShowError(false);\r\n        setForgotPwdEmail('');\r\n        setShowForgotPwdEmail(false);\r\n        setShowForgotPwdEmailError(false);\r\n        setShowResetsecces(false);\r\n        setShowLoginSpinner(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (pwd !== ''){                                //hiding login error when retype password\r\n            setShowError(false)\r\n        }\r\n    },[pwd]);\r\n    useEffect(() => {\r\n        setShowError(false);                            //hiding login error when changing the email\r\n        if (!isEmailValid(email) && email !== '') {     //showing email pattern error if the email is not valid\r\n            setShowEmailError(true);\r\n        } else if (isEmailValid(email)) { \r\n            setShowEmailError(false);\r\n            setForgotPwdEmail(email);\r\n        }\r\n    },[email]);\r\n    useEffect(() => {\r\n        if (!isEmailValid(forgotPwdEmail) && forgotPwdEmail !== '') {     //showing email pattern error if the email is not valid\r\n            setShowForgotPwdEmailError(true);\r\n        } else if (isEmailValid(forgotPwdEmail)) { \r\n            setShowForgotPwdEmailError(false);\r\n        }\r\n    },[forgotPwdEmail]);\r\n\r\n    async function login () {\r\n        try {\r\n            setShowLoginSpinner(true);\r\n            const parseUser = await Parse.User.logIn(email, pwd);\r\n            // Trigger onLogin event and clean the fields\r\n            onLogin(new UserModel(parseUser));\r\n            handleCloseLogin();\r\n            cleanFormFields();\r\n            \r\n        } catch(error) {                                //showing login error & deleting the pwd field if the login failed\r\n            // show an error alert\r\n            setPwd('');\r\n            setShowError(true);\r\n        }\r\n    }\r\n    \r\n    function close () {\r\n        handleCloseLogin();\r\n        cleanFormFields();\r\n    }\r\n    \r\n    function ifEnterPressed (event) {                   //detecting if Enter pressed and executing login\r\n        if (isEnterPressed(event) && email){\r\n            setShowLoginSpinner(true);\r\n            login();\r\n        }\r\n    }\r\n    \r\n    function showSignup(){\r\n        close();\r\n        showSignupModal();\r\n    }\r\n    \r\n    function handleForgotPassword(){                                        //giving option to reset password\r\n        Parse.User.requestPasswordReset(\"email@example.com\").then(() => {\r\n            // Password reset request was sent successfully\r\n            if (typeof document !== 'undefined') {\r\n                setShowResetsecces(true);\r\n                setShowForgotPwdEmail(false);\r\n                console.log('Reset password email sent successfully');\r\n            }\r\n        }).catch((error) => {\r\n            if (typeof document !== 'undefined') {\r\n                console.error('Error while creating request to reset user password', error);\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Modal size='md' show={showModal} onHide={close} centered className='c-login-modal'>\r\n            <Modal.Header>\r\n                <Modal.Title>כניסה</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <Form>\r\n                    <Form.Group controlId='loginUserName'>\r\n                        <Form.Label>שם משתמש</Form.Label>\r\n                        <Form.Control type=\"email\" placeholder=\"דואר אלקטרוני\" value={email} className={showEmailError ? 'is-invalid' : null}\r\n                            onChange={e => { setEmail(e.target.value) }} onKeyPress={ifEnterPressed} />\r\n                        <Form.Control.Feedback type=\"invalid\">כתובת מייל לא תקינה</Form.Control.Feedback>\r\n                    </Form.Group>\r\n                    <Form.Group controlId='loginPwd' className='mb-0'>\r\n                        <Form.Label>סיסמה</Form.Label>\r\n                        <Form.Control type=\"password\" value={pwd}\r\n                            onChange={e => {setPwd(e.target.value)}}  onKeyPress={ifEnterPressed}/>\r\n                        <Button variant='link' onClick={() => {setShowForgotPwdEmail(true)}}>שכחתי סיסמה</Button>\r\n                    </Form.Group>\r\n                        {showForgotPwdEmail && <Card.Body>\r\n                            <Form.Group controlId='forgotPwdEmail'>\r\n                                <Form.Label>דואר אלקטרוני לאיפוס סיסמה</Form.Label>\r\n                                <Form.Control type=\"email\" value={forgotPwdEmail} className={showForgotPwdEmailError ? 'is-invalid' : null}\r\n                                    onChange={e => { setForgotPwdEmail(e.target.value) }} />\r\n                                <Form.Control.Feedback type=\"invalid\">כתובת מייל לא תקינה</Form.Control.Feedback>\r\n                                <Button variant='dark' className='mt-2' onClick={handleForgotPassword}>אפס סיסמה</Button>\r\n                            </Form.Group>\r\n                        </Card.Body>}\r\n                        {showResetsecces && <Form.Label>נשלח מייל לאיפוס סיסמה</Form.Label>}\r\n                </Form>\r\n                {showError ? <Alert variant=\"danger\">מייל או סיסמה שגויים</Alert> : null}\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant='link' className='ml-auto' onClick={showSignup}>עדיין לא רשומים?</Button>\r\n                <Button variant=\"secondary\" onClick={close}>סגירה</Button>\r\n                <Button variant=\"warning\" onClick={login}>\r\n                    <span className={showLoginSpinner && !showError ? 'sr-only' : ''}>כניסה</span>\r\n                    {showLoginSpinner && !showError &&<Spinner\r\n                        as=\"span\"\r\n                        animation=\"border\"\r\n                        size=\"sm\"\r\n                        role=\"status\"\r\n                        aria-hidden=\"true\"\r\n                        />}\r\n                </Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n}\r\n\r\nexport default LoginModal;\r\n","import { createContext } from 'react';\r\n\r\nconst ActiveUserContext = createContext(null);\r\n\r\nexport default ActiveUserContext;","import Parse from 'parse';\r\n\r\nasync function addGarden(name, year, logo) {\r\n    const Gan = Parse.Object.extend('Gan');\r\n    const myNewGarden = new Gan();\r\n\r\n    myNewGarden.set('name', name);\r\n    myNewGarden.set('year', year);\r\n    myNewGarden.set('logo', new Parse.File(logo.name, logo));\r\n    \r\n    const response = await myNewGarden.save();\r\n    \r\n    return response;\r\n}\r\n\r\nexport default addGarden;","import Parse from 'parse';\r\n\r\nasync function signup(email, pwd, role, fname, lname, gardenId) {\r\n    const parseGarden = await new Parse.Query(new Parse.Object.extend('Gan')).get(gardenId);\r\n    const user = new Parse.User()    \r\n\r\n    user.set('username', email);\r\n    user.set('email', email);\r\n    user.set('role', role);\r\n    user.set('gan', parseGarden);\r\n    user.set('fname', fname);\r\n    user.set('lname', lname);\r\n    user.set('password', pwd);\r\n    \r\n    const res = await user.signUp();\r\n    return res;\r\n}\r\n\r\nexport default signup;","\r\nfunction isPasswordValid(pwd) {\r\n    return /(?=^.{8,}$)((?=.*\\d)|(?=.*\\W+))(?![.\\n])(?=.*[A-Z])(?=.*[a-z]).*$/.test(pwd)\r\n}\r\n\r\nexport default isPasswordValid;","import { useContext, useEffect, useState } from 'react';\r\nimport { Button, Card, Form, Spinner, Col, Modal, Alert, Row } from 'react-bootstrap';\r\nimport ActiveUserContext from '../../utils/ActiveUserContext';\r\nimport isEmailValid from '../../utils/isEmailValid';\r\nimport { Redirect } from 'react-router-dom';\r\nimport addGarden from '../../utils/addGarden';\r\nimport signup from '../../utils/signup';\r\nimport Parse from 'parse';\r\nimport UserModel from '../../model/UserModel';\r\nimport isPasswordValid from '../../utils/isPasswordValid';\r\n\r\n\r\nconst SignupModal = ({showModal, onLogin, handleCloseSignup}) => {\r\n    const activeUser = useContext(ActiveUserContext);\r\n    const [userFname, setUserFname] = useState('');\r\n    const [userLname, setUserLname] = useState('');\r\n    const [userEmail, setUserEmail] = useState('');\r\n    const [userPwd, setUserPwd] = useState('');\r\n    const [gardenName, setGardenName] = useState('');\r\n    const [gardenYear, setGardenYear] = useState('');\r\n    const [parentsEmail, setParentsEmail] = useState('');\r\n    const [parentsFname, setParentsFname] = useState('');\r\n    const [logo, setLogo] = useState('');\r\n    const [logoUrl, setLogoUrl] = useState('');\r\n    const [showEmailError, setShowEmailError] = useState(false);\r\n    const [showPwdError, setShowPwdError] = useState(false);\r\n    const [isFormValid, setIsFormValid] = useState(false);\r\n    const [showSignupSpinner, setShowSignupSpinner] = useState(false);\r\n    const [showParentsLoginAlert, setShowParentsLoginAlert] = useState(false);\r\n    \r\n    useEffect(() => {\r\n        if (isRequierdFieldFull() && isEmailValid(userEmail) && isPasswordValid(userPwd)) {     // setting the form as valid - if all required fields filled &\r\n            setIsFormValid(true);                                                               //      email and pwd are valid\r\n            setShowEmailError(false);\r\n            setShowPwdError(false)\r\n        } else {\r\n            \r\n            if (!isEmailValid(userEmail) && userEmail !=='') {                  // showing error if the email is not valid\r\n                setShowEmailError(true);\r\n                if (isFormValid) {\r\n                    setIsFormValid(false);\r\n                }\r\n            } else if (isEmailValid(userEmail)) {\r\n                setShowEmailError(false);\r\n                if (isFormValid) {\r\n                    setIsFormValid(false);\r\n                }\r\n            }\r\n            \r\n            if (!isPasswordValid(userPwd) && userPwd !=='') {                   // showing error if the pwd is not valid\r\n                setShowPwdError(true);\r\n                if (isFormValid) {\r\n                    setIsFormValid(false);\r\n                }\r\n            } else if (isPasswordValid(userPwd)) {\r\n                setShowPwdError(false);\r\n                if (isFormValid) {\r\n                    setIsFormValid(false);\r\n                }\r\n            }\r\n        }\r\n    },[userFname, userLname, userEmail, userPwd, gardenName, gardenYear, parentsEmail, parentsFname]);\r\n\r\n    async function login () {\r\n        try {\r\n            const parseUser = await Parse.User.logIn(userEmail, userPwd);   // performing login to the app\r\n            \r\n            onLogin(new UserModel(parseUser));                              // Trigger onLogin event on HomePage and cleaning the fields\r\n            close();\r\n            \r\n        } catch(error) {\r\n            console.log('error while login')\r\n        }\r\n    }\r\n\r\n    function close () {\r\n        URL.revokeObjectURL(logoUrl);\r\n        handleCloseSignup();\r\n        cleanFields();\r\n    }\r\n    \r\n    function isRequierdFieldFull() {\r\n        if (userFname && userLname && userEmail && userPwd \r\n            && gardenName && gardenYear && parentsEmail && parentsFname) {\r\n            return true\r\n        }\r\n    }\r\n\r\n    function cleanFields() {\r\n        setUserFname('');\r\n        setUserLname('');\r\n        setUserEmail('');\r\n        setUserPwd('');\r\n        setGardenName('');\r\n        setGardenYear('');\r\n        setParentsEmail('');\r\n        setParentsFname('');\r\n        setLogo('');\r\n        setLogoUrl('');\r\n        setShowSignupSpinner(false);\r\n        setShowParentsLoginAlert(false);\r\n    }\r\n\r\n    function signupClicked(){                                               // showing alert with parents login details after clicking signup\r\n        setShowSignupSpinner(true);\r\n        setShowParentsLoginAlert(true);\r\n    }\r\n\r\n    async function performSignup () {\r\n        //creat garden in parse\r\n        const garden = await addGarden(gardenName, gardenYear,logo);\r\n\r\n        //create parent in parse\r\n        await signup(parentsEmail, 'Dd123456', 'parent', parentsFname, '', garden.id);\r\n\r\n        //create manager in parse\r\n        await signup(userEmail, userPwd, 'manager', userFname, userLname, garden.id);\r\n\r\n        //login with the user\r\n        login();\r\n    }\r\n    \r\n    if (activeUser) {\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n    \r\n    function onFileSelect(event) {                                    // showing logo preview\r\n        const newLogo = event.target.files[0];\r\n        const newLogoUrl = URL.createObjectURL(newLogo);\r\n        setLogo(newLogo);\r\n        setLogoUrl(newLogoUrl);\r\n    }\r\n\r\n    const logoView = logoUrl ?\r\n        <Card>\r\n            <Card.Img src={logoUrl}/>\r\n        </Card>\r\n    : null;\r\n\r\n    return (\r\n        <Modal size='md' show={showModal} onHide={close} centered className=\"c-signup-modal\">\r\n            <Modal.Header>\r\n                <Modal.Title>הרשמה לאתר הגן הדיגיטלי</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <Alert show={showParentsLoginAlert} variant=\"info\">\r\n                    <Alert.Heading as='h5'>פרטי התחברות להורים</Alert.Heading>\r\n                    <hr />\r\n                    <Form as={Row}>\r\n                    <Form.Group as={Col} className='mb-0'>\r\n                        <Form.Label>שם משתמש</Form.Label>\r\n                        <Form.Control placeholder={parentsEmail} disabled />\r\n                    </Form.Group>\r\n                    <Form.Group as={Col} className='mb-0'>\r\n                        <Form.Label>סיסמה</Form.Label>\r\n                        <Form.Control placeholder=\"Dd123456\" disabled />\r\n                    </Form.Group>\r\n                    </Form>\r\n                    <hr />\r\n                    <div className=\"d-flex justify-content-end\">\r\n                        <Button onClick={() => {setShowParentsLoginAlert(false); performSignup()}} variant=\"outline-info\">\r\n                            רשמתי את הפרטים\r\n                        </Button>\r\n                    </div>\r\n                </Alert>\r\n                <Form>\r\n                    <Form.Row>\r\n                        <Form.Group as={Col} controlId=\"formUserFname\">\r\n                            <Form.Label>שם</Form.Label>\r\n                            <Form.Control type=\"text\" value={userFname} onChange={e => {setUserFname(e.target.value)}}/>\r\n                        </Form.Group>\r\n                        <Form.Group as={Col} controlId=\"formUserLname\">\r\n                            <Form.Label>משפחה</Form.Label>\r\n                            <Form.Control type=\"text\" value={userLname} onChange={e => {setUserLname(e.target.value)}}/>\r\n                        </Form.Group>\r\n                    </Form.Row>\r\n                    \r\n                    <Form.Row>\r\n                        <Form.Group as={Col} controlId=\"formUserEmail\">\r\n                            <Form.Label>דואר אלקטרוני</Form.Label>              {/* onChanging this input it set the value of parentsEmail */}\r\n                            <Form.Control type=\"email\" value={userEmail} className={showEmailError ? 'is-invalid' : null} \r\n                                onChange={e => { setUserEmail(e.target.value); setParentsEmail(`horim@${e.target.value.split('@')[0]}.com`) }} />\r\n                            <Form.Control.Feedback type=\"invalid\">כתובת מייל לא תקינה</Form.Control.Feedback>\r\n                        </Form.Group>\r\n                        <Form.Group as={Col} controlId=\"formUserPwd\">\r\n                            <Form.Label>סיסמה</Form.Label>\r\n                            <Form.Control type=\"password\" value={userPwd} className={showPwdError ? 'is-invalid' : null} \r\n                            onChange={e => { setUserPwd(e.target.value) }} />\r\n                            <Form.Text className=\"text-muted\">סיסמה צריכה להיות מעל 8 תווים ולהכיל: אות גדולה, אות קטנה ומספר.</Form.Text>\r\n                        </Form.Group>\r\n                    </Form.Row>\r\n                    \r\n                    <Form.Row>\r\n                        <Form.Group as={Col} controlId=\"formGardenName\">\r\n                            <Form.Label>שם המוסד</Form.Label>                     {/* onChanging this input it set the value of parentsFname */}\r\n                            <Form.Control type=\"text\" value={gardenName} \r\n                                onChange={e => {setGardenName(e.target.value); setParentsFname(`הורי ${e.target.value}`)}}/>\r\n                            <Form.Text className=\"text-muted\">לדוגמה: גן השושנים</Form.Text>\r\n                        </Form.Group>\r\n                        <Form.Group as={Col} controlId=\"formGardenYear\">\r\n                            <Form.Label>שנת לימודים</Form.Label>\r\n                            <Form.Control type=\"text\" value={gardenYear} onChange={e => {setGardenYear(e.target.value)}}/>\r\n                            <Form.Text className=\"text-muted\">לדוגמה: תשפ\"א</Form.Text>\r\n                        </Form.Group>\r\n                    </Form.Row>\r\n                    \r\n                    <Form.Row>\r\n                        <Form.Group as={Col} controlId=\"formParentsEmail\">\r\n                            <Form.Label>שם משתמש להורים</Form.Label>\r\n                            <Form.Control type=\"text\" value={parentsEmail} onChange={e => {setParentsEmail(e.target.value)}}/>\r\n                            <Form.Text className=\"text-muted\">ניתן לשינוי</Form.Text>\r\n                        </Form.Group>\r\n                        <Form.Group as={Col} controlId=\"formParentsFname\">\r\n                            <Form.Label>שם חשבון הורים</Form.Label>\r\n                            <Form.Control type=\"text\" value={parentsFname} onChange={e => {setParentsFname(e.target.value)}}/>\r\n                            <Form.Text className=\"text-muted\">ניתן לשינוי</Form.Text>\r\n                        </Form.Group>\r\n                    </Form.Row>\r\n\r\n\r\n                    <Form.Row>\r\n                        <Form.Group as={Col}>\r\n                            <Form.File id=\"formGardenLogo\" label='' data-browse=\"בחירת לוגו\" accept=\"image/*\" custom onChange={onFileSelect}/>\r\n                            <Form.Text className=\"text-muted\">{logo ? 'נבחרה תמונה' : 'מומלץ לבחור לוגו שיופיע בדפי הקשר'}</Form.Text>\r\n                        </Form.Group>\r\n                        {logo &&\r\n                            <Form.Group as={Col}>\r\n                                {logoView}\r\n                                {logo && logoView === null && \r\n                                        <div className='images-spinner row justify-content-center mt-3'>\r\n                                            <Spinner animation=\"border\" variant=\"warning\" />\r\n                                        </div>\r\n                                }\r\n                            </Form.Group>\r\n                        }\r\n                    </Form.Row>\r\n                </Form>\r\n            </Modal.Body>\r\n            <Modal.Footer className='flex-nowrap'>\r\n                <Button variant=\"secondary\" className='w-50' onClick={close} disabled={showSignupSpinner}>סגירה</Button>\r\n                <Button variant=\"warning\" className='w-50' type=\"button\" disabled={!isFormValid} onClick={signupClicked}>\r\n                    <span className={showSignupSpinner && 'sr-only'}>הרשמה</span>\r\n                    {showSignupSpinner &&<Spinner\r\n                        as=\"span\"\r\n                        animation=\"border\"\r\n                        size=\"sm\"\r\n                        role=\"status\"\r\n                        aria-hidden=\"true\"\r\n                        />}\r\n                </Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default SignupModal;","import './HomePage.css'\r\nimport logo from '../../images/logo192.png'\r\nimport { Button } from 'react-bootstrap';\r\nimport { useContext, useState } from 'react';\r\nimport LoginModal from '../../components/LoginModal/LoginModal';\r\nimport { Redirect } from 'react-router-dom';\r\nimport ActiveUserContext from '../../utils/ActiveUserContext';\r\nimport SignupModal from '../../components/SignupModal/SignupModal';\r\n\r\nconst HomePage = (props) => {\r\n    const [showLoginModal, setShowLoginModal] = useState(false);\r\n    const [showSignupModal, setShowSignupModal] = useState(false);\r\n    const activeUser = useContext(ActiveUserContext);\r\n    const [redirectToMyGarden, setRedirectToMyGarden] = useState(activeUser ? true : false);\r\n    const { onLogin } = props;\r\n\r\n    function handleLogin(user) {\r\n        onLogin(user);\r\n        setRedirectToMyGarden(true);\r\n    }\r\n    \r\n    function handleCloseLogin() {\r\n        setShowLoginModal(false);\r\n    }\r\n    function handleCloseSignup() {\r\n        setShowSignupModal(false);\r\n    }\r\n    \r\n    if (redirectToMyGarden) {\r\n        return <Redirect to=\"my-garden\"/>;\r\n    }\r\n    return (\r\n        <div className=\"p-home\">\r\n            <div className='main-content'>\r\n                <div className='logo'>\r\n                    <img className='logo-img' src={logo} alt=\"logo\"/>\r\n                </div>\r\n                <div className='main-text'>\r\n                    <div className='text'>\r\n                        <h2>הגן הדיגיטלי</h2>\r\n                        <h5>הקשר שלך עם ההורים</h5>\r\n                        <h5>נראה אחרת!</h5>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className='buttons'>\r\n                <Button variant=\"outline-warning\" size='lg' onClick={() => { setShowLoginModal(true) }}>כניסה</Button>{' '}\r\n                <Button variant=\"warning\" size='lg' onClick={() => { setShowSignupModal(true) }}>הרשמה</Button>\r\n            </div>\r\n            <LoginModal showModal={showLoginModal} showSignupModal={() => {setShowSignupModal(true)}} \r\n                handleCloseLogin={handleCloseLogin} onLogin={handleLogin}/>\r\n            <SignupModal showModal={showSignupModal} handleCloseSignup={handleCloseSignup} onLogin={handleLogin} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default HomePage;","import './GalleryCard.css'\r\nimport { Card, Col, Form } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faEdit, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst GalleryCard = ({gallery, handleEdit, handleDeleteClick, handlePublish, activeUser}) => {\r\n    const {id, title, isReady } = gallery;\r\n\r\n    const img = gallery.images && Object.values(gallery.images).map(img => img.url)[0];\r\n\r\n    return (\r\n        <div className='c-gallery-card'>\r\n            <Card>\r\n                <Link to={'/galleries/'+ id}>\r\n                    {img ? <Card.Img variant='top' src={img}/> : null}\r\n                    <Card.Title className='text-center'>{title}</Card.Title>\r\n                </Link>\r\n                {activeUser && activeUser.role === 'manager' &&         //showing edit icons only to garden owner\r\n                    <Card.Footer>\r\n                        <Col>\r\n                            <Form.Check type='switch' variant='warning' id={`galleryStatus${id}`} label={isReady ? 'גלוי' : 'טיוטה'} \r\n                                checked={isReady} onChange={() => handlePublish(gallery)} />\r\n                        </Col>\r\n                        <Col>\r\n                            <Col onClick={() => {handleEdit(gallery)}}>\r\n                                <FontAwesomeIcon icon={faEdit}/>\r\n                            </Col>\r\n                            <Col onClick={() => {handleDeleteClick(gallery)}}>\r\n                                <FontAwesomeIcon icon={faTrashAlt}/>\r\n                            </Col>\r\n                        </Col>\r\n                    </Card.Footer>\r\n                }\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default GalleryCard;","import './DafKesherCard.css'\r\nimport { Card, Col, Form } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faCopy, faEdit, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst DafKesherCard = ({dafKesher, handleEdit, handleDeleteClick, handleDuplicate, handlePublish, activeUser}) => {\r\n    const { id, title, isReady, hebDate} = dafKesher;\r\n\r\n    return (\r\n        <div className='c-daf-kesher-card'>\r\n            <Card>\r\n                <Link to={'/dapey-kesher/' + id}>\r\n                    <Card.Title className='text-center'>{title}</Card.Title>\r\n                    <Card.Text className='text-center'>{hebDate}</Card.Text>\r\n                </Link>\r\n                {activeUser && activeUser.role === 'manager' &&\r\n                    <Card.Footer>\r\n                        <Col>\r\n                            <Form.Check type='switch' variant='warning' id={`dafKesherStatus${id}`} label={isReady ? 'גלוי' : 'טיוטה'} \r\n                                checked={isReady} onChange={() => handlePublish(dafKesher)} />\r\n                        </Col>\r\n                        <Col>\r\n                            <Col onClick={() => {handleDuplicate(dafKesher)}}>\r\n                                <FontAwesomeIcon icon={faCopy}/>\r\n                            </Col>\r\n                            <Col onClick={() => {handleEdit(dafKesher)}}>\r\n                                <FontAwesomeIcon icon={faEdit}/>\r\n                            </Col>\r\n                            <Col onClick={() => {handleDeleteClick(dafKesher)}}>\r\n                                <FontAwesomeIcon icon={faTrashAlt}/>\r\n                            </Col>\r\n                        </Col>\r\n                    </Card.Footer>\r\n                }\r\n            </Card>\r\n            \r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DafKesherCard;","import { createContext } from 'react';\r\n\r\nconst ActiveGardenContext = createContext(null);\r\n\r\nexport default ActiveGardenContext;","import { useContext } from 'react'\r\nimport { Card, Col, Container, Row, Spinner } from 'react-bootstrap'\r\nimport { Redirect } from 'react-router-dom'\r\nimport ActiveUserContext from '../../utils/ActiveUserContext'\r\nimport GalleryCard from '../../components/GalleryCard/GalleryCard';\r\nimport './MyGardenPage.css'\r\nimport DafKesherCard from '../../components/DafKesherCard/DafKesherCard';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faChevronLeft, faImages, faNewspaper } from '@fortawesome/free-solid-svg-icons';\r\nimport ActiveGardenContext from '../../utils/ActiveGardenContext';\r\n\r\nconst MyGardenPage = ({data}) => {\r\n    const activeUser = useContext(ActiveUserContext);\r\n    const activeGarden = useContext(ActiveGardenContext);\r\n    \r\n    if (!data) {\r\n        return <div className='images-spinner row justify-content-center mt-3'>\r\n                    <Spinner animation=\"border\" variant=\"warning\" />\r\n                </div>\r\n    }\r\n\r\n    if (!activeUser) {\r\n        return <Redirect to=\"/\"/>\r\n    }    \r\n\r\n    const dapeyKesherView = Object.values(data.dapeyKesher).sort((a,b) => b.date - a.date).filter((x, index) => index < 6).map(dafKesher => \r\n            <Col className='py-2' md={12} lg={6} key={dafKesher.id}>\r\n                <DafKesherCard dafKesher={dafKesher} activeUser={activeUser}/>\r\n            </Col>            \r\n    );\r\n\r\n    const galleriesView = Object.values(data.galleries).filter((x, index) => index < 4).map(gallery => {\r\n        const id = gallery.id;\r\n        \r\n        return (\r\n            <Col className='py-2' md={12} lg={6} key={id}>\r\n                <GalleryCard gallery={gallery} activeUser={activeUser}/>\r\n            </Col>        \r\n        )\r\n    });    \r\n\r\n    return (\r\n        <div className=\"p-my-gan\">\r\n            <Container>\r\n                <Row className='mx-0 header'>\r\n                    <Col sm={9}>\r\n                        <h2 className='name'>{activeGarden.name}</h2>\r\n                    </Col>\r\n                    <Col sm={3} className='p-0'>\r\n                        <div className='logo'><img src={activeGarden.logo} alt=\"logo\"/></div>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col md={6} className='mb-3'>\r\n                        <Card>\r\n                            <Card.Header as='h5'>\r\n                                <span>דפי קשר</span>\r\n                                <FontAwesomeIcon icon={faNewspaper}/>\r\n                            </Card.Header>\r\n                            <Card.Body>\r\n                                <Row>\r\n                                    {dapeyKesherView}\r\n                                </Row>\r\n                            </Card.Body>\r\n                            <a href='#/dapey-kesher'>\r\n                                <Card.Footer className='text-center'>\r\n                                    <FontAwesomeIcon icon={faChevronLeft}/>\r\n                                </Card.Footer>\r\n                            </a>\r\n                        </Card>\r\n                    </Col>\r\n                    <Col md={6} className='mb-3'>\r\n                        <Card>\r\n                            <Card.Header as='h5'>\r\n                                <span>גלריות</span>\r\n                                <FontAwesomeIcon icon={faImages}/>\r\n                            </Card.Header>\r\n                            <Card.Body>\r\n                                <Row>\r\n                                    {galleriesView}\r\n                                </Row>\r\n                            </Card.Body>\r\n                            <a href='#/galleries'>\r\n                                <Card.Footer className='text-center'>\r\n                                <FontAwesomeIcon icon={faChevronLeft}/>\r\n                                </Card.Footer>\r\n                            </a>\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MyGardenPage;","import './AddMainCard.css'\r\nimport React from 'react';\r\nimport { Card } from 'react-bootstrap';\r\n\r\nconst AddMainCard = (props) => {\r\n\r\n    const {onClick} = props;\r\n\r\n    return (\r\n        <div className='c-add-main-card'>\r\n            <Card onClick={onClick}>\r\n                <Card.Title className='text-center'>+</Card.Title>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AddMainCard;","import Parse from \"parse\";\r\n\r\nasync function createNewDafKesher(parseGarden, title, date) {\r\n\r\n    const DafKesher = Parse.Object.extend('DafKesher');\r\n    const myNewDafKesher = new DafKesher();\r\n\r\n    myNewDafKesher.set('title',title);\r\n    myNewDafKesher.set('gan', parseGarden);\r\n    myNewDafKesher.set('date', new Date(date));\r\n    myNewDafKesher.set('data', {\"studyTopics\":[], \"messages\":[]});\r\n\r\n    const res = await myNewDafKesher.save();\r\n    \r\n    return res;\r\n}\r\n\r\nexport default createNewDafKesher;","import Parse from \"parse\";\r\n\r\nasync function updateDafKesherDetails(dafKesherId, title, date, isReady) {\r\n\r\n    const DafKesher = Parse.Object.extend('DafKesher');\r\n    const query = new Parse.Query(DafKesher);\r\n\r\n    const dafKesher = await query.get(dafKesherId);\r\n    dafKesher.set('title', title);\r\n    dafKesher.set('date', new Date(date));\r\n    dafKesher.set('isReady', isReady);\r\n    const res = await dafKesher.save();    \r\n\r\n    return res;\r\n    \r\n}\r\n\r\nexport default updateDafKesherDetails;","import Parse from \"parse\";\r\n\r\nasync function createNewGallery(parseGarden, title) {\r\n\r\n    const Gallery = Parse.Object.extend('Gallery');\r\n    const myGallery = new Gallery();\r\n\r\n    myGallery.set('title',title);\r\n    myGallery.set('gan', parseGarden);\r\n\r\n    const res = await myGallery.save();\r\n    \r\n    return res;\r\n}\r\n\r\nexport default createNewGallery;","import Parse from \"parse\";\r\n\r\nasync function updateGalleryDetails(galleryId, title, isReady) {\r\n\r\n    const Gallery = Parse.Object.extend('Gallery');\r\n    const query = new Parse.Query(Gallery);\r\n\r\n    const gallery = await query.get(galleryId);\r\n    gallery.set('title', title);\r\n    gallery.set('isReady', isReady);\r\n    const res = await gallery.save();\r\n    \r\n    return res;\r\n\r\n}\r\n\r\nexport default updateGalleryDetails;","const unitsNames = ['א', 'ב', 'ג', 'ד', 'ה', 'ו', 'ז', 'ח', 'ט'];       // setting array of units for GIMATRIA\r\nconst tensNames = ['י', 'כ', 'ל', 'מ', 'נ', 'ס', 'ע', 'פ', 'צ'];        // setting array of tens for GIMATRIA\r\n\r\n\r\n// this function checking if the hebrew year is leap year\r\nfunction isLeapYear(year) {\r\n    const restForLeapYears = [0, 3, 6, 8, 11, 14, 17];\r\n    return (restForLeapYears.includes(year % 19));\r\n}\r\n\r\n// this function returns the hebrew year in hebrew letters\r\nfunction getHebrewYearName(yearNum) {\r\n\r\n    let year = yearNum % 1000;                                  // droping the thousands\r\n    let yearArr = [];\r\n    const taf = parseInt(year / 400);                           // dividing the Hundreds by 400, 300, 200, 100 and push the correct letter to the array\r\n    for (let i = 0; i < taf ; i++) {\r\n    yearArr.push('ת');\r\n    }\r\n    year = year % 400;\r\n    parseInt(year / 300) !== 0 && yearArr.push('ש');\r\n    year = year % 300;\r\n    parseInt(year / 200) !== 0 && yearArr.push('ר');\r\n    year = year % 200;\r\n    parseInt(year / 100) !== 0 && yearArr.push('ק');\r\n    year = year % 100;\r\n    \r\n    parseInt(year / 10) !== 0 && yearArr.push(tensNames[parseInt(year / 10) - 1]);      // calculating the tens & untits GIMATRIA\r\n    (year % 10) !== 0 && yearArr.push(unitsNames[year % 10 - 1]);\r\n\r\n    yearArr.length > 1 ? yearArr.splice(-1, 0, '\"') : yearArr.push(\"'\");    // adding QUOTATION MARK before the last letter, or APOSTROPHE when only 1 letter\r\n\r\n    const yearName = yearArr.join('');                                      // convertin the array to string\r\n\r\n    return(yearName)\r\n}\r\n\r\nfunction getHebrewMonthName(monthNum, yearNum) {\r\n    // setting array of hebrew months names\r\n    const monthNames = ['תשרי', 'חשון', 'כסלו', 'טבת', 'שבט', \"אדר א'\", \"אדר ב'\", 'ניסן', 'אייר', 'סיון', 'תמוז', 'אב', 'אלול'];\r\n    const monthName = !isLeapYear(yearNum) && monthNum === 6 ? 'אדר' : monthNames[monthNum -1];\r\n    return monthName;\r\n}\r\n\r\nfunction getHebrewDateName(dateNum) {\r\n    let dateArr = [];\r\n    parseInt(dateNum / 10) !== 0 && dateArr.push(tensNames[parseInt(dateNum / 10) - 1]);      // calculating the tens & untits GIMATRIA\r\n    (dateNum % 10) !== 0 && dateArr.push(unitsNames[dateNum % 10 - 1]);\r\n\r\n    dateArr.length > 1 ? dateArr.splice(-1, 0, '\"') : dateArr.push(\"'\");    // adding QUOTATION MARK before the last letter, or APOSTROPHE when only 1 letter\r\n\r\n    let dateName = dateArr.join('');                                        // convertin the array to string\r\n\r\n    if (dateName === 'י\"ה') {                                               // handling exeptions for ט\"ו & ט\"ז\r\n        dateName = 'ט\"ו'\r\n    } else if (dateName === 'י\"ו') {\r\n        dateName = 'ט\"ז'\r\n    }\r\n\r\n    return(dateName)\r\n}\r\n\r\nfunction getHebrewDate(dateObj) {\r\n    const hebrewDate = require('hebrew-date');\r\n    const { year, month, date } = hebrewDate(dateObj);\r\n    \r\n    const HebrewYearName = getHebrewYearName(year);\r\n    const hebrewMonthName = getHebrewMonthName(month, year);\r\n    const hebrewDateName = getHebrewDateName(date);\r\n    const hebrewDateStr = hebrewDateName + ' ' + hebrewMonthName + ' ' + HebrewYearName;\r\n\r\n    return (hebrewDateStr);\r\n}\r\n\r\nexport default getHebrewDate;","import getHebrewDate from \"../utils/getHebrewDate\";\r\n\r\nclass DafKesherModel {\r\n    constructor(parseDafKesher){\r\n        this.id = parseDafKesher.id;\r\n        this.title = parseDafKesher.get('title');\r\n        this.date = parseDafKesher.get('date');\r\n        this.data = parseDafKesher.get('data');\r\n        this.isReady = parseDafKesher.get('isReady');\r\n        this.hebDate = getHebrewDate(parseDafKesher.get('date'));\r\n    }\r\n}\r\n\r\nexport default DafKesherModel;","class GalleryModel {\r\n    constructor(parseGallery){\r\n        this.id = parseGallery.id;\r\n        this.title = parseGallery.get('title');\r\n        this.isReady = parseGallery.get('isReady');\r\n        this.parseGallery = parseGallery;\r\n    }\r\n}\r\n\r\nexport default GalleryModel;","import { useContext, useEffect, useState } from 'react';\r\nimport { Button, Modal, Form, Alert } from 'react-bootstrap';\r\nimport isEnterPressed from '../../utils/IsEnterPressed';\r\nimport createNewDafKesher from '../../utils/createNewDafKesher';\r\nimport updateDafKesherDetails from '../../utils/updateDafKesherDetails';\r\nimport createNewGallery from '../../utils/createNewGallery';\r\nimport updateGalleryDetails from '../../utils/updateGalleryDetails';\r\nimport ActiveGardenContext from '../../utils/ActiveGardenContext';\r\nimport DafKesherModel from '../../model/DafKesherModel';\r\nimport GalleryModel from '../../model/GalleryModel';\r\n\r\nconst MainCardEditorModal = (props) => {\r\n    const {data, cardType, showModal, handleUpdate, closeModal, cleanDataToEdit} = props;\r\n    const activeGarden = useContext(ActiveGardenContext);\r\n    const [title, setTitle] = useState('');\r\n    const [date, setDate] = useState('');\r\n    const [showError, setShowError] = useState(false);\r\n    \r\n    useEffect(() => { \r\n        if (typeof data === 'object') {                     //if editing existing content - filling the fields with the original data \r\n            setTitle(data.title);\r\n            if (cardType === 'dafKesher') {\r\n\r\n                const date = data.date.toLocaleString().split('.');                             //converting dafKesher date to simple format \r\n                const viewDate = `${date[2].split(',')[0]}-${date[1].length === 1 ? '0' + \r\n                    date[1] : date[1]}-${date[0].length === 1 ? '0' + date[0] : date[0]}`;\r\n                setDate(viewDate);\r\n            }\r\n        } else {\r\n            setTitle('');\r\n            setDate('');\r\n        }\r\n    }, [data, cardType]);\r\n    \r\n    function close () {\r\n        setTitle('');\r\n        setDate('');        \r\n        closeModal();\r\n        setShowError(false);\r\n        cleanDataToEdit();\r\n    }\r\n\r\n    async function onSave() {\r\n        if (cardType === 'dafKesher') {                         //detecting the type of Card (dafKesher/gallery)\r\n            if (!(title && date)) {\r\n                setShowError(true);\r\n            } else {\r\n                let dafKesher;\r\n                const action = data ? 'update' : 'add';\r\n                if (!data) {                                 //if adding new content - creating new row in the database\r\n                    dafKesher = await createNewDafKesher(activeGarden.parseGarden, title, date);\r\n                } else {                                            //if updating existing content - updating the data in the database\r\n                    dafKesher = await updateDafKesherDetails(data.id, title, date, data.isReady);\r\n                }\r\n                handleUpdate(action, new DafKesherModel(dafKesher));\r\n                close();\r\n            }\r\n        } else if (cardType === 'gallery') {\r\n            if (!title) {\r\n                setShowError(true);\r\n            } else {\r\n                let gallery;\r\n                const action = data ? 'update' : 'add';\r\n                if (!data) {\r\n                    gallery = await createNewGallery(activeGarden.parseGarden, title);\r\n                } else {\r\n                    gallery = await updateGalleryDetails(data.id, title);\r\n                }\r\n                const galleryToSend = new GalleryModel(gallery);\r\n                if (data) {\r\n                    galleryToSend.images = data.images;             // when only updating gallery details - copy the images data\r\n                }\r\n                handleUpdate(action, galleryToSend);\r\n                close();\r\n            }\r\n        }\r\n    }\r\n\r\n    function ifEnterPressed (event) {                           //detecting if Enter pressed - and executing login if all fields that required are filled\r\n        if (cardType === 'dafKesher') {\r\n            if (isEnterPressed(event) && title && date) {\r\n                onSave();\r\n            }\r\n        } else if (cardType === 'gallery') {\r\n            if (isEnterPressed(event) && title) {\r\n                onSave();\r\n            }\r\n        }\r\n    }\r\n\r\n    let modalTitle;                                             //setting the modal title depending on the situation (add/edit + dafKesher/gallery)\r\n    if (cardType === 'dafKesher') {\r\n        modalTitle = data ? 'עריכת פרטי דף קשר' : 'יצירת דף קשר חדש';\r\n    } else if (cardType === 'gallery') {\r\n        modalTitle = data ? 'עריכת פרטי גלריה' : 'יצירת גלריה חדשה';\r\n    }\r\n\r\n    return (\r\n        <Modal size='sm' show={showModal} onHide={close} centered className='c-main-card-editor-modal'>\r\n            <Modal.Header>\r\n                <Modal.Title>{modalTitle}</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <Form>\r\n                    <Form.Group controlId='title'>\r\n                        <Form.Label>כותרת</Form.Label>\r\n                        <Form.Control type=\"text\" value={title} onChange={e => { setTitle(e.target.value) }} onKeyPress={ifEnterPressed} />\r\n                    </Form.Group>\r\n                    {cardType === 'dafKesher' ? <Form.Group controlId='date'>\r\n                        <Form.Label>תאריך</Form.Label>\r\n                        <Form.Control type=\"date\" value={date}\r\n                            onChange={e => { setDate(e.target.value) }} onKeyPress={ifEnterPressed} />\r\n                    </Form.Group> : null}\r\n                </Form>\r\n                {showError ? <Alert variant=\"danger\">נא למלא את כל השדות</Alert> : null}\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={close}>סגירה</Button>\r\n                <Button variant=\"warning\" onClick={onSave}>שמירה</Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n}\r\n\r\nexport default MainCardEditorModal;\r\n","import Parse from \"parse\";\r\n\r\nasync function deleteDafKesher(dafKesherId) {\r\n\r\n    const DafKesher = Parse.Object.extend('DafKesher');\r\n    const query = new Parse.Query(DafKesher);\r\n\r\n    const dafKesher = await query.get(dafKesherId);\r\n    const res = await dafKesher.destroy();\r\n\r\n    return res;\r\n}\r\n\r\nexport default deleteDafKesher;","import Parse from \"parse\";\r\n\r\nasync function deleteGallery(galleryId) {\r\n\r\n    const Gallery = Parse.Object.extend('Gallery');\r\n    const query = new Parse.Query(Gallery);\r\n\r\n    const gallery = await query.get(galleryId);\r\n    const res = await gallery.destroy();\r\n\r\n    return res;\r\n}\r\n\r\nexport default deleteGallery;","import Parse from \"parse\";\r\n\r\nasync function deleteImage(imageId) {\r\n\r\n    const Image = Parse.Object.extend('Image');\r\n    const query = new Parse.Query(Image);\r\n\r\n    const image = await query.get(imageId);\r\n    const res = await image.destroy();\r\n\r\n    return res;\r\n}\r\n\r\nexport default deleteImage;","import Parse from \"parse\";\r\n\r\nasync function updateDafKesherContent(dafKesherId, content) {\r\n\r\n    const DafKesher = Parse.Object.extend('DafKesher');\r\n    const query = new Parse.Query(DafKesher);\r\n\r\n    query.get(dafKesherId).then((dafKesher) => {\r\n        dafKesher.set('data', content);\r\n        dafKesher.save().then(\r\n            (result) => {\r\n                // console.log('DafKesher updated');\r\n            },\r\n            (error) => {\r\n                // console.error('Error while updating DafKesher: ', error);\r\n            }\r\n\r\n        );\r\n\r\n        \r\n        \r\n    });\r\n    return '';\r\n}\r\n\r\nexport default updateDafKesherContent;","import React from 'react';\r\nimport { Button, Modal } from 'react-bootstrap';\r\nimport deleteDafKesher from '../../utils/deleteDafKesher';\r\nimport deleteGallery from '../../utils/deleteGallery';\r\nimport deleteImage from '../../utils/deleteImage';\r\nimport updateDafKesherContent from '../../utils/updateDafKesherContent';\r\n\r\nfunction DeleteWarningModal(props) {\r\n    const {fullData, data, dafKesherId, objectType, showModal, closeModal, cleanDataToEdit, handleUpdate} = props;\r\n    function handleClose() {\r\n        closeModal();\r\n        cleanDataToEdit();\r\n    }\r\n\r\n    async function deleteClick () {\r\n        if (objectType === 'דף קשר') {\r\n            const res = await deleteDafKesher(data.id);\r\n            handleUpdate('delete', res);\r\n            handleClose();\r\n\r\n        } else if (objectType === 'גלריה') {\r\n            const res = await deleteGallery(data.id);\r\n            handleUpdate('delete', res);\r\n            handleClose();\r\n\r\n        } else if (objectType === 'תמונה') {\r\n            const res = await deleteImage(data.id);\r\n            handleUpdate('delete', res);\r\n            handleClose();\r\n        } else if (objectType === 'חומר לימודי' || objectType === 'הודעה') {\r\n            const newData = {...fullData};\r\n            newData[data.type] = [...fullData[data.type]];\r\n            newData[data.type].splice(data.index, 1);\r\n            updateDafKesherContent(dafKesherId, newData).then(() => {\r\n                handleUpdate(data.type, newData[data.type]);\r\n                handleClose();\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Modal size='md' show={showModal} onHide={handleClose} backdrop=\"static\" keyboard={false} centered className='c-delete-warning-modal'>\r\n            <Modal.Header>\r\n                <Modal.Title>מחיקת {objectType}</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body className='text-center'>\r\n                <h5>הנך מנסה למחוק {objectType}{data.title && <span className='font-weight-bold'> {data.title}</span>},</h5>\r\n                <div>פעולה זו איננה ניתנת לביטול</div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={handleClose}>ביטול</Button>\r\n                <Button variant=\"warning\" onClick={deleteClick}>מחיקה</Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n}\r\n\r\nexport default DeleteWarningModal;","import { useContext, useState } from 'react';\r\nimport { Col, Container, Row, Spinner } from 'react-bootstrap';\r\nimport { Redirect } from 'react-router-dom';\r\nimport DafKesherCard from '../../components/DafKesherCard/DafKesherCard';\r\nimport ActiveUserContext from '../../utils/ActiveUserContext';\r\nimport './DapeyKesherPage.css';\r\nimport AddMainCard from '../../components/AddMainCard/AddMainCard';\r\nimport MainCardEditorModal from '../../components/MainCardEditorModal/MainCardEditorModal';\r\nimport DeleteWarningModal from '../../components/DeleteWarningModal/DeleteWarningModal';\r\nimport ActiveGardenContext from '../../utils/ActiveGardenContext';\r\nimport createNewDafKesher from '../../utils/createNewDafKesher';\r\nimport updateDafKesherContent from '../../utils/updateDafKesherContent';\r\nimport DafKesherModel from '../../model/DafKesherModel';\r\nimport updateDafKesherDetails from '../../utils/updateDafKesherDetails';\r\n\r\nconst DapeyKesherPage = ({data, onUpdate}) => {\r\n    const activeUser = useContext(ActiveUserContext);\r\n    const activeGarden = useContext(ActiveGardenContext);\r\n    const [showMainCardEditorModal, setShowMainCardEditorModal] = useState(false);\r\n    const [showDeleteAlert, setShowDeleteAlert] = useState(false);\r\n    const [dafKesherToEdit, setDafKesherToEdit] = useState('');\r\n    \r\n\r\n    if (!activeUser) {\r\n        return <Redirect to=\"/\" />\r\n    }\r\n\r\n    if (!activeGarden) {\r\n        return <div className='images-spinner row justify-content-center mt-3'>\r\n                    <Spinner animation=\"border\" variant=\"warning\" />\r\n                </div>\r\n    }\r\n\r\n    function handleEdit(dafKesher) {\r\n        setDafKesherToEdit(dafKesher);\r\n        setShowMainCardEditorModal(true);\r\n    }\r\n\r\n    function handleDeleteClick(dafKesher) {\r\n        setDafKesherToEdit(dafKesher);\r\n        setShowDeleteAlert(true);\r\n    }\r\n\r\n    async function handleDuplicate(dafKesher){\r\n        const res = await createNewDafKesher(activeGarden.parseGarden, dafKesher.title, dafKesher.date);\r\n        await updateDafKesherContent(res.id, dafKesher.data);\r\n\r\n        res.data = dafKesher.data;\r\n        const newDafKesher = new DafKesherModel(res);\r\n        handleUpdate('add', newDafKesher);\r\n    }\r\n\r\n    async function handlePublish(dafKesher){\r\n        const {id, title, date, isReady} = dafKesher;\r\n        const res = await updateDafKesherDetails(id, title, date, !isReady);\r\n        handleUpdate('update', new DafKesherModel(res));\r\n    }\r\n\r\n    function handleUpdate(action, content){\r\n        const dapeyKesher = {...data.dapeyKesher};\r\n        if (!(action === 'delete')) {\r\n            dapeyKesher[content.id] = content;\r\n        } else {\r\n            delete dapeyKesher[content.id];\r\n        }\r\n        onUpdate('dapeyKesher', dapeyKesher);\r\n    }\r\n\r\n    const addDafKesher = activeUser && activeUser.role === 'manager' ?\r\n        <Col className='py-2' md={6} lg={3}>\r\n            <AddMainCard onClick={() => { setShowMainCardEditorModal(true) }}/>\r\n        </Col>\r\n    : null;\r\n\r\n    const dapeyKesherView = data ? Object.values(data.dapeyKesher).sort((a,b) => b.date - a.date).map(dafKesher =>\r\n        <Col className='py-2' md={6} lg={3} key={dafKesher.id}>\r\n            <DafKesherCard dafKesher={dafKesher} handleEdit={handleEdit} handleDeleteClick={handleDeleteClick} \r\n                activeUser={activeUser} handleDuplicate={handleDuplicate} handlePublish={handlePublish}/>\r\n        </Col>\r\n    ) : null;\r\n\r\n    return (\r\n        <div className=\"p-dapey-kesher\">\r\n            <Container>\r\n                <Row className='mx-0 header'>\r\n                    <Col sm={9}>\r\n                        <div className='name'>{activeGarden.name}</div>\r\n                        <h2>דפי הקשר שלנו</h2>\r\n                    </Col>\r\n                    <Col sm={3} className='p-0'>\r\n                        <div className='logo'><img src={activeGarden.logo} alt=\"logo\"/></div>\r\n                    </Col>\r\n                </Row>\r\n                <Row className='align-items-stretch'>\r\n                    {addDafKesher}\r\n                    {dapeyKesherView}\r\n                </Row>\r\n            </Container>\r\n            <MainCardEditorModal data={dafKesherToEdit} cardType='dafKesher' showModal={showMainCardEditorModal} handleUpdate={handleUpdate} \r\n                closeModal={() => { setShowMainCardEditorModal(false) }} cleanDataToEdit={() => { setDafKesherToEdit('') }} />\r\n            <DeleteWarningModal data={dafKesherToEdit} objectType='דף קשר' showModal={showDeleteAlert} handleUpdate={handleUpdate}\r\n                closeModal={() => setShowDeleteAlert(false)} cleanDataToEdit={() => { setDafKesherToEdit('') }} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DapeyKesherPage;","import { useContext, useState } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport ActiveUserContext from '../../utils/ActiveUserContext';\r\nimport './GalleriesPage.css';\r\nimport GalleryCard from '../../components/GalleryCard/GalleryCard';\r\nimport { Col, Container, Row, Spinner } from 'react-bootstrap';\r\nimport MainCardEditorModal from '../../components/MainCardEditorModal/MainCardEditorModal';\r\nimport DeleteWarningModal from '../../components/DeleteWarningModal/DeleteWarningModal';\r\nimport AddMainCard from '../../components/AddMainCard/AddMainCard';\r\nimport ActiveGardenContext from '../../utils/ActiveGardenContext';\r\nimport updateGalleryDetails from '../../utils/updateGalleryDetails';\r\nimport GalleryModel from '../../model/GalleryModel';\r\n\r\nconst GalleriesPage = ({data, onUpdate}) => {\r\n    const activeUser = useContext(ActiveUserContext);\r\n    const activeGarden = useContext(ActiveGardenContext);\r\n    const [showMainCardEditorModal, setShowMainCardEditorModal] = useState(false);\r\n    const [showDeleteAlert, setShowDeleteAlert] = useState(false);\r\n    const [galleryToEdit, setGalleryToEdit] = useState('');\r\n\r\n    if (!activeUser) {\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n    \r\n    if (!activeGarden) {\r\n        return <div className='images-spinner row justify-content-center mt-3'>\r\n                    <Spinner animation=\"border\" variant=\"warning\" />\r\n                </div>\r\n    }\r\n\r\n    function handleEdit(gallery) {\r\n        setGalleryToEdit(gallery);\r\n        setShowMainCardEditorModal(true);\r\n    }    \r\n\r\n    function handleDeleteClick(gallery) {\r\n        setGalleryToEdit(gallery);\r\n        setShowDeleteAlert(true);\r\n    }\r\n\r\n    async function handlePublish(gallery){\r\n        const {id, title, isReady} = gallery;\r\n        const res = await updateGalleryDetails(id, title, !isReady);\r\n        const galleryToSend = new GalleryModel(res);\r\n        galleryToSend.images = gallery.images;\r\n        handleUpdate('update', galleryToSend);\r\n    }\r\n\r\n    function handleUpdate(action, content){\r\n        const galleries = {...data.galleries};\r\n        if (!(action === 'delete')) {\r\n            galleries[content.id] = content;\r\n        } else {\r\n            delete galleries[content.id];\r\n        }\r\n        onUpdate('galleries', galleries);\r\n    }\r\n\r\n    const addGallery = activeUser && activeUser.role === 'manager' ?\r\n        <Col className='py-2' md={6} lg={3}>\r\n            <AddMainCard onClick={() => { setShowMainCardEditorModal(true) }}/>\r\n        </Col>\r\n    : null;\r\n    \r\n    const galleriesView = data && data.galleries ? Object.values(data.galleries).map(gallery => {\r\n        const id = gallery.id;\r\n\r\n        return(<Col className='py-2' md={6} lg={3} key={id}>\r\n            <GalleryCard gallery={gallery} handleEdit={handleEdit} handleDeleteClick={handleDeleteClick} \r\n                handlePublish={handlePublish} activeUser={activeUser}/>\r\n        </Col>)        \r\n    }) : null;\r\n\r\n    return (\r\n        <div className=\"p-galleries\">\r\n            <Container>\r\n                <Row className='mx-0 header'>\r\n                    <Col sm={9}>\r\n                        <div className='name'>{activeGarden.name}</div>\r\n                        <h2>הגלריות שלנו</h2>\r\n                    </Col>\r\n                    <Col sm={3} className='p-0'>\r\n                        <div className='logo'><img src={activeGarden.logo} alt=\"logo\"/></div>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    {addGallery}\r\n                    {galleriesView}\r\n                </Row>\r\n            </Container>\r\n            <MainCardEditorModal data={galleryToEdit} cardType='gallery' showModal={showMainCardEditorModal} handleUpdate={handleUpdate} \r\n                closeModal={() => { setShowMainCardEditorModal(false) }} cleanDataToEdit={() => { setGalleryToEdit('') }} />\r\n            <DeleteWarningModal data={galleryToEdit} objectType='גלריה' showModal={showDeleteAlert} handleUpdate={handleUpdate}\r\n                closeModal={() => setShowDeleteAlert(false)} cleanDataToEdit={() => { setGalleryToEdit('') }} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default GalleriesPage;","import Parse from 'parse';\r\n\r\nasync function addImage(image, galleryId) {\r\n    const parseGallery = await new Parse.Query(new Parse.Object.extend('Gallery')).get(galleryId);\r\n    \r\n    const Image = Parse.Object.extend('Image');\r\n    const myNewImage = new Image();\r\n    \r\n    myNewImage.set('file', new Parse.File(image.name, image));\r\n    \r\n    // myNewImage.set('isPrimary', true);\r\n    myNewImage.set('gallery', parseGallery);\r\n    \r\n    const response = await myNewImage.save();\r\n    \r\n    return response;\r\n}\r\n\r\nexport default addImage;","import { useContext, useEffect, useState } from 'react';\r\nimport { Button, CardColumns, Card, Form, Spinner } from 'react-bootstrap';\r\nimport ActiveUserContext from '../../utils/ActiveUserContext';\r\nimport addImage from '../../utils/addImage';\r\nimport emailjs from 'emailjs-com';\r\nimport isEmailValid from '../../utils/isEmailValid';\r\nimport './ContactUsPage.css'\r\nimport getHebrewDate from '../../utils/getHebrewDate';\r\n\r\n\r\nconst ContactUsPage = () => {\r\n    const activeUser = useContext(ActiveUserContext);\r\n    const [name, setName] = useState(activeUser ? `${activeUser.fname} ${activeUser.lname}` : '');\r\n    const [email, setEmail] = useState(activeUser ? activeUser.email : '');\r\n    const [subject, setSubject] = useState('');\r\n    const [request, setRequest] = useState('');\r\n    const [useUserInfo, setUseUserInfo] = useState(activeUser ? true : false);\r\n    const [files, setFiles] = useState('');\r\n    const [filesUrl, setFilesUrl] = useState('');\r\n    const [showEmailError, setShowEmailError] = useState(false);\r\n    const [isFormValid, setIsFormValid] = useState(false);\r\n    const [isFormSubmitted, setIsFormSubmitted] = useState(false);\r\n\r\n    function onFilesSelect(event) {                               // uploading images to show the problem if needed\r\n        const newFiles = Object.values(event.target.files);\r\n        let newFilesUrl = newFiles.map(file => URL.createObjectURL(file));\r\n        setFiles(newFiles);\r\n        setFilesUrl(newFilesUrl);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (name && isEmailValid(email) && subject && request) {        // setting the form as valid - if all required fields filled & email is valid\r\n            setIsFormValid(true);\r\n            setShowEmailError(false);\r\n        } else if (!isEmailValid(email) && email!=='') {                // showing error if the email is not valid\r\n            setShowEmailError(true);\r\n            if (isFormValid) {\r\n                setIsFormValid(false);\r\n            }\r\n        } else if (isEmailValid(email)) {\r\n            setShowEmailError(false);\r\n            if (isFormValid) {\r\n                setIsFormValid(false);\r\n            }\r\n        }\r\n    },[name, email, subject, request, isFormValid]);\r\n    \r\n    async function sendForm () {                                      // sending the form to site's DevTeam and cleaning the fields\r\n        let filesUrl ='';\r\n\r\n        await Promise.all(files.map(async file => {\r\n            const res = await addImage(file, 'fe0qzAHNtH');\r\n            filesUrl += (`  ${res.get('file')._url}`);\r\n        }));\r\n\r\n        emailjs.send(\"service_5cx738e\",\"template_k3nemuh\",{\r\n            from_name: name,\r\n            from_email: email,\r\n            topic: subject,\r\n            message: request,\r\n            file_links: filesUrl.toString(),\r\n        });\r\n\r\n        filesUrl.forEach(url => {URL.revokeObjectURL(url)});\r\n        setSubject('');\r\n        setRequest('');\r\n        setFiles('');\r\n        setFilesUrl('');\r\n        setIsFormSubmitted(true);\r\n    }\r\n    \r\n    function onSwitchMode() {                                           // giving the users option to automatically fill their details\r\n        if (!useUserInfo) {\r\n            setName(`${activeUser.fname} ${activeUser.lname}`);\r\n            setEmail(activeUser.email);\r\n            setUseUserInfo(!useUserInfo);\r\n        } else {\r\n            setName('');\r\n            setEmail('');\r\n            setUseUserInfo(!useUserInfo);\r\n        }\r\n    }\r\n\r\n    const filesAmount = files ? files.length : 0;\r\n\r\n    const filesView = filesUrl ? filesUrl.map((fileUrl, index) =>\r\n        <Card key={index}>\r\n            <Card.Img src={fileUrl}/>\r\n        </Card>\r\n    ) : null;\r\n\r\n    if (isFormSubmitted) {                                              // showing success message after sending the form\r\n        return(\r\n            <div className=\"p-contact-us success\">\r\n                <h2>פנייתך נשלחה בהצלחה</h2>\r\n                <Button variant='info' onClick={() => {setIsFormSubmitted(false)}} >פנייה נוספת</Button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"p-contact-us\">\r\n            <h2>צור קשר</h2>\r\n            <Form>\r\n                <Form.Group controlId=\"formContactUsName\">\r\n                    <Form.Label>שם</Form.Label>\r\n                    {activeUser ? <Form.Check type='switch' variant='warning' id='formContactUsFileSwitch' \r\n                        label={useUserInfo ? 'משתמש בפרטים שלי' : 'השתמש בפרטים שלי'} checked={useUserInfo} onChange={onSwitchMode} /> : null}\r\n                    <Form.Control type=\"text\" value={name} onChange={e => {setName(e.target.value)}}/>\r\n                </Form.Group>\r\n                \r\n                <Form.Group controlId=\"formContactUsEmail\">\r\n                    <Form.Label>דואר אלקטרוני</Form.Label>\r\n                    <Form.Control type=\"email\" value={email} className={showEmailError ? 'is-invalid' : null} onChange={e => { setEmail(e.target.value) }} />\r\n                    <Form.Control.Feedback type=\"invalid\">כתובת מייל לא תקינה</Form.Control.Feedback>\r\n                </Form.Group>\r\n\r\n                <Form.Group controlId=\"formContactUsSubject\">\r\n                    <Form.Label>נושא</Form.Label>\r\n                    <Form.Control type=\"text\" value={subject}  onChange={e => {setSubject(e.target.value)}}/>\r\n                </Form.Group>\r\n\r\n                <Form.Group controlId=\"formContactUsRequest\">\r\n                    <Form.Label>תוכן הפניה</Form.Label>\r\n                    <Form.Control as=\"textarea\" value={request}  onChange={e => {setRequest(e.target.value)}}/>\r\n                </Form.Group>\r\n\r\n                <Form.Group>\r\n                    <Form.File id=\"formContactUsFile\" label='' data-browse=\"בחירת קבצים\" accept=\"image/*\" custom multiple onChange={onFilesSelect}/>\r\n                    <Form.Text className=\"text-muted\">{filesAmount >0 ? `נבחרו ${filesAmount} קבצים` : 'ניתן לבחור מספר קבצים'}</Form.Text>\r\n                    <CardColumns>\r\n                        {filesView}\r\n                    </CardColumns>\r\n                    {files && filesView === null && \r\n                        <div className='images-spinner row justify-content-center mt-3'>\r\n                            <Spinner animation=\"border\" variant=\"warning\" />\r\n                        </div>\r\n                    }\r\n                </Form.Group>\r\n                <Button variant=\"warning\" type=\"button\" className='w-100' disabled={!isFormValid} onClick={sendForm}>\r\n                    שליחה\r\n                </Button>\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ContactUsPage;","import { faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React from 'react';\r\nimport { Card, Col } from 'react-bootstrap';\r\nimport './ImageCard.css';\r\n\r\nconst ImageCard = (props) => {\r\n    const { image, onClick, activeUser, handleDeleteClick } = props;\r\n    return (\r\n        <div className='c-image-card'>\r\n            <Card>\r\n                {image ? <Card.Img variant=\"top\" src={image.url}  onClick={onClick} /> : null}\r\n                {activeUser && activeUser.role === 'manager' &&                                     //showing edit icons only to garden owner\r\n                    <Card.Footer>\r\n                        <Col onClick={() => {handleDeleteClick(image)}}>\r\n                            <FontAwesomeIcon icon={faTrashAlt}/>\r\n                        </Col>\r\n                    </Card.Footer>}\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ImageCard;","import { faChevronLeft, faChevronRight } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React from 'react';\r\nimport { Button, Col, Image, Modal } from 'react-bootstrap';\r\nimport './ImageModal.css'\r\n\r\nconst ImageModal = (props) => {\r\n    const { images, showModal, selectedImage, close, onImageChange } = props;\r\n\r\n    //enabling loop browsing\r\n    function nextImage() {\r\n        if (selectedImage === images.length - 1) {\r\n            onImageChange(0);\r\n        } else {\r\n            onImageChange(selectedImage + 1);\r\n        }\r\n    }\r\n\r\n    function prevImage() {\r\n        if (selectedImage === 0) {\r\n            onImageChange(images.length - 1);\r\n        } else {\r\n            onImageChange(selectedImage - 1);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Modal size='md' show={showModal} onHide={close} centered className='c-image-modal'>\r\n            <Modal.Body className='p-0 row'>\r\n                <Col xs={1} className='prev'>\r\n                    <a className='prev' variant='dark' onClick={prevImage}><FontAwesomeIcon icon={faChevronRight}/></a>\r\n                </Col>\r\n                <Col xs={10} className='p-0'>\r\n                    <Image src={images[selectedImage].url} />\r\n                    <Button onClick={close} className='modal-x-button' variant='outline-warning'>X</Button>\r\n                </Col>\r\n                <Col xs={1} className='next'>\r\n                    <a className='next' variant='dark' onClick={nextImage}><FontAwesomeIcon icon={faChevronLeft}/></a>\r\n                </Col>\r\n            </Modal.Body>\r\n        </Modal>\r\n    );\r\n}\r\n\r\nexport default ImageModal;","import React from 'react';\r\nimport { Card } from 'react-bootstrap';\r\nimport './AddImageCard.css';\r\n\r\nconst AddImageCard = (props) => {\r\n    const { onClick } = props;\r\n\r\n    return (\r\n        <Card className='c-add-image-card' onClick={onClick}>\r\n            <Card.Title>+</Card.Title>\r\n        </Card>\r\n    );\r\n}\r\n\r\nexport default AddImageCard;","class ImageModel {\r\n    constructor(parseImage){\r\n        this.id = parseImage.id;\r\n        this.url = parseImage.get('file')._url;\r\n    }\r\n}\r\n\r\nexport default ImageModel;","\r\nimport React, { useState } from 'react';\r\nimport { Button, Card, CardColumns, Form, Modal, Spinner } from 'react-bootstrap';\r\nimport addImage from '../../utils/addImage';\r\nimport ImageModel from '../../model/ImageModel'\r\n\r\nfunction AddImageModal(props) {\r\n    const {galleryTitle, galleryId, showModal, closeModal, handleUpdate} = props;\r\n    const [images, setImages] = useState('');\r\n    const [imagesUrl, setImagesUrl] = useState([]);\r\n\r\n    function handleClose() {\r\n        closeModal();\r\n        setImages('');\r\n        setImagesUrl([]);\r\n    }\r\n    \r\n    function onFilesSelect(event) {\r\n        const newImages = Object.values(event.target.files);\r\n        let newImagesUrl = newImages.map(image => URL.createObjectURL(image));\r\n        setImages(newImages);\r\n        setImagesUrl(newImagesUrl);\r\n    }\r\n\r\n    function closeClicked() {\r\n        imagesUrl.forEach(url => {URL.revokeObjectURL(url)});\r\n        handleClose()\r\n    }\r\n    \r\n    async function addClicked() {\r\n        const uploadedImages = await Promise.all(images.map(async image => {\r\n            const res = await addImage(image, galleryId);\r\n            return (new ImageModel(res));\r\n        }));\r\n        handleUpdate('add', uploadedImages);\r\n        handleClose();\r\n    }\r\n    \r\n    const imagesAmount = images ? images.length : 0;\r\n\r\n    const imagesView = imagesUrl ? imagesUrl.map((imageUrl, index) =>\r\n        <Card key={index}>\r\n            <Card.Img src={imageUrl}/>\r\n        </Card>\r\n    ) : null;\r\n\r\n    return (\r\n        <Modal className='c-add-image-modal' size={'md'} show={showModal} onHide={handleClose} centered backdrop=\"static\" keyboard={false}>\r\n            <Modal.Header>\r\n                <Modal.Title>הוספת תמונות לגלריה <span className='font-weight-bold'>{galleryTitle}</span></Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <Form.Group>\r\n                    <Form.File id=\"formFiles\" label={images ? 'filesNames' : 'בחירת קבצים'} data-browse=\"בחירת קבצים\" accept=\"image/*\" custom multiple onChange={onFilesSelect}/>\r\n                    <Form.Text className=\"text-muted\">{imagesAmount >0 ? `נבחרו ${imagesAmount} קבצים` : 'ניתן לבחור מספר קבצים יחד'}</Form.Text>\r\n                    <CardColumns>\r\n                        {imagesView}\r\n                    </CardColumns>\r\n                    {images && imagesView.length === 0 && \r\n                        <div className='images-spinner row justify-content-center mt-3'>\r\n                            <Spinner animation=\"border\" variant=\"warning\" />\r\n                        </div>\r\n                    }\r\n                </Form.Group>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={closeClicked} disabled={images && imagesView.length === 0}>ביטול</Button>\r\n                <Button variant=\"warning\" onClick={addClicked} disabled={imagesView.length === 0}>הוספה</Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n}\r\n\r\nexport default AddImageModal;","import React, { useContext, useEffect, useState } from 'react';\r\nimport { CardColumns, Container, Spinner } from 'react-bootstrap';\r\nimport './GalleryPage.css'\r\nimport { Redirect, useParams } from 'react-router-dom';\r\nimport ImageCard from '../../components/ImageCard/ImageCard';\r\nimport ImageModal from '../../components/ImageModal/ImageModal';\r\nimport ActiveUserContext from '../../utils/ActiveUserContext';\r\nimport DeleteWarningModal from '../../components/DeleteWarningModal/DeleteWarningModal';\r\nimport AddImageCard from '../../components/ImageCard/AddImageCard';\r\nimport AddImageModal from '../../components/AddImage/AddImageModal';\r\n\r\nconst GalleryPage = ({data, onUpdate}) => {\r\n    const activeUser = useContext(ActiveUserContext);\r\n    const [showImageModal, setShowImageModal] = useState(false);\r\n    const [selectedImage, setSelectedImage] = useState(null);\r\n    const [showDeleteAlert, setShowDeleteAlert] = useState(false);\r\n    const [showAddImage, setShowAddImage] = useState(false);\r\n    const [imageToEdit, setImageToEdit] = useState('');\r\n\r\n    const galleryId = useParams().id;\r\n\r\n    if (!data) {\r\n        return <div className='images-spinner row justify-content-center mt-3'>\r\n                    <Spinner animation=\"border\" variant=\"warning\" />\r\n                </div>\r\n    }\r\n    \r\n    if (!activeUser) {\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n\r\n    const {images, title} = data.galleries[galleryId];\r\n    \r\n    function onImageSelect (index) {\r\n        setShowImageModal(true);\r\n        setSelectedImage(index);\r\n    }\r\n\r\n    function onImageChange (index){\r\n        setSelectedImage(index);\r\n    }\r\n\r\n    function handleDeleteClick(image) {\r\n        setImageToEdit(image);\r\n        setShowDeleteAlert(true);\r\n    }\r\n\r\n    function handleUpdate(action, content){\r\n        const updatedImages = {...images};\r\n        if (action === 'delete') {\r\n            delete updatedImages[content.id];\r\n        } else if (action === 'add') {\r\n            content.forEach(image => {\r\n                updatedImages[image.id] = image;\r\n            });\r\n        }\r\n        const galleries = {...data.galleries};\r\n        galleries[galleryId].images = updatedImages;\r\n        onUpdate('galleries', galleries);\r\n    }\r\n\r\n\r\n    const addImage = activeUser && activeUser.role === 'manager' && <AddImageCard onClick={() => {setShowAddImage(true)}}/>;\r\n\r\n    const imagesView = images && Object.values(images).map((image, index) =>\r\n        <ImageCard image={image} key={image.id} activeUser={activeUser} onClick={() => onImageSelect(index)} handleDeleteClick={handleDeleteClick}/>);\r\n\r\n    return (\r\n        <div className='p-gallery'>\r\n            <h2>{title}</h2>\r\n            <Container>\r\n                <CardColumns>\r\n                    {addImage}\r\n                    {imagesView}\r\n                </CardColumns>\r\n            </Container>\r\n            {selectedImage !== null && images.length>0 &&\r\n                <ImageModal images={images} showModal={showImageModal} selectedImage={selectedImage} \r\n                close={() => { setShowImageModal(false) }} onImageChange={onImageChange} />}\r\n            <DeleteWarningModal data={imageToEdit} objectType='תמונה' showModal={showDeleteAlert} handleUpdate={handleUpdate}\r\n                closeModal={() => setShowDeleteAlert(false)} cleanDataToEdit={() => { setImageToEdit('') }} />\r\n            {images && <AddImageModal galleryTitle={title} galleryId={galleryId} showModal={showAddImage} \r\n                handleUpdate={handleUpdate} closeModal={() => {setShowAddImage(false)}}/>}\r\n        </div>\r\n    )\r\n}\r\nexport default GalleryPage;","import './StudyTopicBox.css';\r\nimport { Card } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faEdit, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { Editor } from 'draft-js';\r\n\r\nconst StudyTopicBox = ({topic, activeUser, onDeleteClick, onEditClick}) => {\r\n    const { headline, content } = topic;\r\n\r\n    if (!activeUser) {\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n\r\n    const editIcon = \r\n        <div>\r\n            <FontAwesomeIcon className='edit-icon' icon={faEdit} onClick={onEditClick} />\r\n            <FontAwesomeIcon className='edit-icon' icon={faTrashAlt} onClick={onDeleteClick} />\r\n        </div>\r\n\r\n    return (\r\n        <div className='c-study-topic-box mb-4'>\r\n            {activeUser && activeUser.role === 'manager' && editIcon}\r\n            <Card.Title>{headline}</Card.Title>\r\n            {/* <Card.Text>{content}</Card.Text> */}\r\n            <Editor editorState={content} />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default StudyTopicBox;","\r\nfunction getRandomBgColor() {\r\n    \r\n    //returns random bootstrap variant name\r\n\r\n    const bgColors = ['primary', 'secondary', 'success', 'danger', 'warning', 'info', 'light', 'dark'];\r\n    const randomBgColor = bgColors[Math.floor(Math.random() * bgColors.length)];\r\n\r\n    return randomBgColor;\r\n}\r\n\r\nexport default getRandomBgColor;","import './MessageBox.css';\r\nimport { Card } from 'react-bootstrap';\r\nimport getRandomBgColor from '../../utils/getRandomBgColor';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faEdit, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { Editor } from 'draft-js';\r\n\r\nconst MessageBox = ({topic, activeUser, onDeleteClick, onEditClick}) => {\r\n    const { headline, content } = topic;\r\n    \r\n    const bgColor = getRandomBgColor();\r\n\r\n    if (!activeUser) {\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n\r\n    const editIcon = \r\n        <div>\r\n            <FontAwesomeIcon className='edit-icon' icon={faEdit} onClick={onEditClick} />\r\n            <FontAwesomeIcon className='edit-icon' icon={faTrashAlt} onClick={onDeleteClick} />\r\n        </div>;\r\n\r\n    return (\r\n        <Card className='c-message-box m-2' bg={bgColor} text={bgColor === 'light' ? 'dark' : 'white'}>\r\n            <Card.Body>\r\n                {activeUser && activeUser.role === 'manager' && editIcon}\r\n                <Card.Title>{headline}</Card.Title>\r\n                {/* <Card.Text>{content}</Card.Text> */}\r\n                <Editor editorState={content} />\r\n            </Card.Body>\r\n        </Card>\r\n    );\r\n}\r\n\r\nexport default MessageBox;","import './AddMessageBox.css';\r\nimport { Card } from 'react-bootstrap';\r\nimport ActiveUserContext from '../../utils/ActiveUserContext';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { useContext } from 'react';\r\n\r\nconst AddMessageBox = ({onClick}) => {\r\n    \r\n    const activeUser = useContext(ActiveUserContext);\r\n    \r\n    \r\n    if (!activeUser) {\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n    \r\n    return (\r\n        <Card className='c-add-message-box m-2 text-center' bg={'light'} text={'dark'} onClick={onClick}>\r\n            <Card.Body>\r\n                <Card.Title>+</Card.Title>\r\n            </Card.Body>\r\n        </Card>\r\n    )\r\n}\r\n\r\nexport default AddMessageBox;","import './AddStudyTopicBox.css';\r\nimport React, { useContext } from 'react';\r\nimport { Card } from 'react-bootstrap';\r\nimport ActiveUserContext from '../../utils/ActiveUserContext';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nconst AddStudyTopicBox = ({onClick}) => {\r\n    const activeUser = useContext(ActiveUserContext);\r\n\r\n    if (!activeUser) {\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n\r\n    return (\r\n        <div className='c-add-study-topic-box text-center' onClick={onClick}>\r\n            <Card.Title>+</Card.Title>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AddStudyTopicBox;","import { convertFromRaw, convertToRaw, Editor, EditorState, RichUtils } from 'draft-js';\r\nimport { useEffect, useState } from 'react';\r\nimport { Button, Spinner } from 'react-bootstrap';\r\nimport './TextEditor.css'\r\n\r\nconst TextEditor = ({data, isReadOnly, onUpdate}) => {\r\n    const [editorState, setEditorState] = useState(EditorState.createEmpty());\r\n    useEffect(() => {\r\n        if (data) {\r\n            const newState = EditorState.createWithContent(convertFromRaw(JSON.parse(data)));\r\n            setEditorState(newState);\r\n        }\r\n    },[]);\r\nconsole.log(data);\r\n    function handleKeyCommand(command){\r\n        const newState = RichUtils.handleKeyCommand(editorState, command);\r\n\r\n        if (newState) {\r\n            setEditorState(newState);\r\n            return true;\r\n        } else {\r\n            return false;            \r\n        }\r\n    }\r\n    \r\n    function toggleBlockType(blockType) {\r\n        setEditorState(RichUtils.toggleBlockType(editorState, blockType));        \r\n    }\r\n    \r\n    function toggleInlineStyle(inlineStyle) {\r\n        setEditorState(RichUtils.toggleInlineStyle(editorState, inlineStyle));        \r\n    }\r\n\r\n    function onTab(e) {\r\n        const maxDepth = 3;\r\n        setEditorState(RichUtils.onTab(e, editorState, maxDepth));\r\n    }\r\n\r\n    function handleOnChange(editorState) {\r\n        const contentState = editorState.getCurrentContent();\r\n        const newState = JSON.stringify(convertToRaw(contentState));\r\n        // setEditorState(editorState);\r\n        onUpdate(newState);\r\n    }\r\n\r\n    // if (!editorState) {\r\n    //     return <div className='images-spinner row justify-content-center mt-3'>\r\n    //                 <Spinner animation=\"border\" variant=\"warning\" />\r\n    //             </div>\r\n    // }\r\n\r\n    return (\r\n        <div className='c-text-editor'>\r\n            <Button variant='outline-warning' onClick={() => toggleInlineStyle('BOLD')}>B</Button>\r\n            <Editor editorState={editorState} onChange={handleOnChange} readOnly={isReadOnly} \r\n                handleKeyCommand={handleKeyCommand} onTab={onTab}/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default TextEditor;","import React, { useEffect, useState } from 'react';\r\nimport { Alert, Button, Form, Modal } from 'react-bootstrap';\r\nimport updateDafKesherContent from '../../utils/updateDafKesherContent';\r\nimport TextEditor from '../TextEditor/TextEditor';\r\n\r\n\r\nconst DafKesherEditorModal = (props) => {\r\n    const { dafKesherId, fullData, data, handleUpdate, showModal, closeModal, cleanDataToEdit, isNew } = props;\r\n    const [headline, setHeadline] = useState();\r\n    const [content, setContent] = useState();\r\n    const [showError, setShowError] = useState(false);\r\nconsole.log(content);\r\n    useEffect(() => { \r\n        if (isNew) {\r\n            setHeadline('');\r\n            setContent('');\r\n        } else {\r\n            setHeadline(fullData[data.type][data.index].headline);\r\n            setContent(fullData[data.type][data.index].content);\r\n        }\r\n    }, [data]);\r\n\r\n    function close () {\r\n        closeModal();\r\n        setShowError(false);\r\n        cleanDataToEdit();\r\n    }\r\n\r\n    function onSave() {\r\n        if (!(headline && content)) {\r\n            setShowError(true);\r\n        } else if (isNew) {\r\n            let newData = { ...fullData };\r\n            newData[data].push({ headline, content });\r\n            updateDafKesherContent(dafKesherId, newData);\r\n            handleUpdate(data, newData[data]);\r\n            close()\r\n        } else {\r\n            let newData = { ...fullData };\r\n            newData[data.type][data.index].headline = headline;\r\n            newData[data.type][data.index].content = content;\r\n            updateDafKesherContent(dafKesherId, newData);\r\n            handleUpdate(data.type, newData[data.type]);\r\n            close();\r\n        }\r\n    }\r\n\r\n\r\n    const modalTitle = isNew ? 'הוספת תוכן חדש' : 'עריכת תוכן דף קשר' ;\r\n\r\n    return (\r\n        <Modal size='md' show={showModal} onHide={close} centered className='c-daf-kesher-editor-modal'>\r\n            <Modal.Header>\r\n                <Modal.Title>{modalTitle}</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n            <Form>\r\n                <Form.Group controlId='headline'>\r\n                    <Form.Label>כותרת</Form.Label>\r\n                    <Form.Control type=\"text\" value={headline} onChange={e => { setHeadline(e.target.value) }} />\r\n                </Form.Group>\r\n                <Form.Group controlId='content'>\r\n                    <Form.Label>תוכן</Form.Label>\r\n                    {/* <Form.Control as=\"textarea\" rows={5} value={content} onChange={e => {setContent(e.target.value)}} /> */}\r\n                    <TextEditor data={content} isReadOnly={false} onUpdate={setContent}/>\r\n                </Form.Group>\r\n                </Form>\r\n                {showError ? <Alert variant=\"danger\">נא למלא את כל השדות</Alert> : null}\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={close}>סגירה</Button>\r\n                <Button variant=\"warning\" onClick={onSave}>שמירה</Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n}\r\n\r\nexport default DafKesherEditorModal;","import './DafKesherPage.css'\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport { Button, Card, Col, Container, Row, Spinner } from 'react-bootstrap';\r\nimport { Redirect, useParams } from 'react-router-dom';\r\nimport StudyTopicBox from '../../components/StudyTopicBox/StudyTopicBox';\r\nimport ActiveUserContext from '../../utils/ActiveUserContext';\r\nimport MessageBox from '../../components/MessageBox/MessageBox';\r\nimport AddMessageBox from '../../components/MessageBox/AddMessageBox';\r\nimport AddStudyTopicBox from '../../components/StudyTopicBox/AddStudyTopicBox';\r\nimport DeleteWarningModal from '../../components/DeleteWarningModal/DeleteWarningModal';\r\nimport DafKesherEditorModal from '../../components/DafKesherEditorModal/DafKesherEditorModal';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faCommentDots, faNewspaper } from '@fortawesome/free-solid-svg-icons';\r\nimport ActiveGardenContext from '../../utils/ActiveGardenContext';\r\n\r\nfunction DafKesherPage({data, onUpdate}) {\r\n    const activeUser = useContext(ActiveUserContext);\r\n    const activeGarden = useContext(ActiveGardenContext);\r\n    const [showDeleteAlert, setShowDeleteAlert] = useState(false);\r\n    const [showEditorModal, setShowEditorModal] = useState(false);\r\n    const [contentToEdit, setContentToEdit] = useState('');\r\n\r\n    const dafKesherId = useParams().id;\r\n    \r\n    if (!data) {\r\n        return <div className='images-spinner row justify-content-center mt-3'>\r\n                    <Spinner animation=\"border\" variant=\"warning\" />\r\n                </div>\r\n    }\r\n    \r\n    if (!activeUser) {\r\n        return <Redirect to=\"/\" />\r\n    }\r\n    \r\n    const { name, logo } = activeGarden;\r\n    const dafKesherData = data.dapeyKesher[dafKesherId].data;\r\n    const { studyTopics, messages } = dafKesherData;\r\n    const {title, hebDate} = data.dapeyKesher[dafKesherId];\r\n    \r\n\r\n    function handleAddClick(contentToEdit) {\r\n        setContentToEdit(contentToEdit);\r\n        setShowEditorModal(true);\r\n    }\r\n\r\n    function handleEditClick(contentToEdit) {\r\n        setContentToEdit(contentToEdit);\r\n        setShowEditorModal(true);\r\n    }\r\n\r\n    function handleDeleteClick(contentToEdit) {\r\n        setContentToEdit(contentToEdit);\r\n        setShowDeleteAlert(true);\r\n    }\r\n\r\n    function handleUpdate(type, content) {\r\n        const updatedDafKesherData = {...dafKesherData};\r\n        updatedDafKesherData[type] = content;\r\n        const dapeyKesher = {...data.dapeyKesher};\r\n        dapeyKesher[dafKesherId].data = updatedDafKesherData;\r\n        onUpdate('dapeyKesher', dapeyKesher)\r\n    }\r\n\r\n    const topicsView = studyTopics ? Object.values(studyTopics).map( (topic, index) => \r\n        <div key={index}>\r\n            <StudyTopicBox topic={{ 'headline': topic.headline, 'content': topic.content }} activeUser={activeUser}\r\n                onEditClick={() => { handleEditClick({ type: 'studyTopics', index: index }) }}\r\n                onDeleteClick={() => { handleDeleteClick({ type: 'studyTopics', index: index }) }} />\r\n        </div>\r\n    ) : null;\r\n    \r\n    const addTopic = activeUser && activeUser.role === 'manager' && <AddStudyTopicBox onClick={() => { handleAddClick('studyTopics') }}/>;\r\n\r\n    const messagesView = messages ? Object.values(messages).map( (message, index) => \r\n        <div key={index}>\r\n            <MessageBox topic={{ 'headline': message.headline, 'content': message.content }} activeUser={activeUser}\r\n                onEditClick={() => { handleEditClick({ type: 'messages', index: index }) }}\r\n                onDeleteClick={() => { handleDeleteClick({ type: 'messages', index: index }) }} />\r\n        </div>\r\n    ) : null;\r\n    \r\n    const addMessage = activeUser && activeUser.role === 'manager' && <AddMessageBox onClick={() => { handleAddClick('messages') }}/>;\r\n\r\n    return (\r\n        <div className='p-daf-kesher'>\r\n            <Container>\r\n                <div className='bh'>ב\"ה</div>\r\n                <Row className='mx-0 header'>\r\n                    <Col sm={9}>\r\n                        <div className='name'>{name}</div>\r\n                        <h2>{`דף קשר ${title}`}</h2>\r\n                        <div className='date'>{hebDate}</div>\r\n                    </Col>\r\n                    <Col sm={3} className='p-0'>\r\n                        <div className='logo'><img src={logo} alt=\"logo\"/></div>\r\n                    </Col>\r\n                </Row>\r\n                <Button className='printbtn' variant=\"warning\" onClick={() => window.print()}>הדפסה</Button>\r\n                <Row>\r\n                    <Col md={8} className='mb-3'>\r\n                        <Card>\r\n                            <Card.Header as='h5'>\r\n                                <span>מה למדנו השבוע?</span>\r\n                                <FontAwesomeIcon className='view-icon' icon={faNewspaper}/>\r\n                            </Card.Header>\r\n                            <Card.Body>\r\n                                {topicsView}\r\n                                {addTopic}\r\n                            </Card.Body>\r\n                        </Card>\r\n                    </Col>\r\n                    <Col md={4}>\r\n                        <Card>\r\n                            <Card.Header as='h5'>\r\n                                <div>הודעות</div>\r\n                                <FontAwesomeIcon className='view-icon' icon={faCommentDots}/>\r\n                            </Card.Header>\r\n                            {messagesView}\r\n                            {addMessage}\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n            <DafKesherEditorModal dafKesherId={dafKesherId} fullData={dafKesherData} data={contentToEdit} cardType='dafKesher' handleUpdate={handleUpdate} \r\n                showModal={showEditorModal} closeModal={() => setShowEditorModal(false)} cleanDataToEdit={() => { setContentToEdit('') }} isNew={typeof contentToEdit === 'string'}/>\r\n            <DeleteWarningModal dafKesherId={dafKesherId} fullData={dafKesherData} data={contentToEdit} objectType={contentToEdit.type === 'studyTopics' ? 'חומר לימודי' : 'הודעה'}\r\n                showModal={showDeleteAlert} closeModal={() => setShowDeleteAlert(false)} cleanDataToEdit={() => { setContentToEdit('') }} handleUpdate={handleUpdate}/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DafKesherPage;","\r\nfunction getGreeting() {\r\n    const date = new Date();\r\n    const hour = date.getHours();\r\n    \r\n    let greeting;\r\n    if (hour >=4 && hour <=10) {                // setting the greeting according to the day part\r\n        greeting = 'בוקר טוב';\r\n    } else if (hour >= 11 && hour <=16) {\r\n        greeting = 'צהריים טובים';\r\n    } else if (hour >= 17 && hour <=20) {\r\n        greeting = 'ערב טוב';\r\n    } else {\r\n        greeting = 'לילה טוב';\r\n    }\r\n    \r\n    return greeting;\r\n}\r\n\r\nexport default getGreeting;","import { Button, Nav, Navbar } from 'react-bootstrap';\r\nimport './TopNavbar.css';\r\nimport logo from '../../images/logo192.png';\r\nimport { useContext } from 'react';\r\nimport ActiveUserContext from '../../utils/ActiveUserContext';\r\nimport { useLocation } from 'react-router-dom';\r\nimport getGreeting from '../../utils/getGreeting';\r\n\r\nconst TopNavbar = ({ onLogout }) => {\r\n\r\n  const activeUser = useContext(ActiveUserContext);\r\n\r\n  const path = useLocation().pathname.split('/')[1];              // detecting the location in the site from the url to set the active link\r\n\r\n  const greeting = getGreeting();                                 // detecting the day part to dynamically greeting the user\r\n\r\n  return (\r\n    <Navbar collapseOnSelect expand=\"lg\">\r\n      <Navbar.Brand href=\"#/\" className='ml-2'>\r\n        <img src={logo} alt=\"Digital Garden logo\" className=\"d-inline-block align-top\"/>\r\n      </Navbar.Brand>\r\n      <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n      <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n        <Nav className={activeUser ? \"ml-auto\" : \"mr-auto\"}>\r\n          \r\n          { activeUser ?                                          // hiding the links inside the site from guests\r\n          <>\r\n            <Nav.Link href=\"#/my-garden\" active={path === 'my-garden' ? true : false}>הגן שלי</Nav.Link>\r\n            <Nav.Link href=\"#/dapey-kesher\" active={path === 'dapey-kesher' ? true : false}>דפי קשר</Nav.Link>\r\n            <Nav.Link href=\"#/galleries\" active={path === 'galleries' ? true : false}>גלריות</Nav.Link>\r\n          </> : null}\r\n\r\n          <Nav.Link href=\"#/contact-us\" active={path === 'contact-us' ? true : false}>צור קשר</Nav.Link>\r\n        </Nav>\r\n        \r\n        { activeUser ?\r\n        <Nav>\r\n          <Navbar.Text>{`${greeting}, ${activeUser.fname}`}</Navbar.Text>\r\n          <Button as='a' variant='' onClick={onLogout}>התנתק</Button>\r\n        </Nav> : null}\r\n\r\n      </Navbar.Collapse>\r\n    </Navbar>\r\n  )\r\n}\r\n\r\nexport default TopNavbar;","import Parse from 'parse';\r\n\r\nasync function getGardenDetails(activeUser) {\r\n    const parseGan = await new Parse.Query(new Parse.Object.extend('Gan')).get(activeUser.gardenId);\r\n    const ganName = parseGan.get('name');\r\n    const ganLogo = parseGan.get('logo')._url;\r\n    const ganYear = parseGan.get('year');\r\n\r\n    const gardenDetails = {\r\n        'parseGarden':parseGan,\r\n        'id':parseGan.id,\r\n        'name':ganName,\r\n        'logo':ganLogo,\r\n        'year':ganYear\r\n    }\r\n    return (gardenDetails);\r\n}\r\n\r\nexport default getGardenDetails;","import Parse from 'parse';\r\nimport DafKesherModel from '../model/DafKesherModel';\r\nimport GalleryModel from '../model/GalleryModel';\r\n\r\nasync function getGardenData(parseGarden, role) {\r\n    const galleriesQuery = new Parse.Query(Parse.Object.extend('Gallery'));\r\n    const dapeyKesherQuery = new Parse.Query(Parse.Object.extend('DafKesher'));\r\n    galleriesQuery.equalTo(\"gan\", parseGarden);\r\n    dapeyKesherQuery.equalTo(\"gan\", parseGarden);\r\n\r\n    const galleriesResults = await galleriesQuery.find();\r\n    const dapeyKesherResults = await dapeyKesherQuery.find();\r\n\r\n    let galleriesArr = galleriesResults.map(gallery => new GalleryModel(gallery));\r\n    let dapeyKesherArr = dapeyKesherResults.map(dafKesher => new DafKesherModel(dafKesher));\r\n\r\n    if (role !== 'manager'){\r\n        galleriesArr = galleriesArr.filter(gallery => gallery.isReady);\r\n        dapeyKesherArr = dapeyKesherArr.filter(dafKesher => dafKesher.isReady);\r\n    }\r\n\r\n    const galleries = galleriesArr.reduce((gallery, item) => {\r\n        return {\r\n            ...gallery,\r\n            [item['id']]: item,\r\n          };\r\n    }, {});\r\n    const dapeyKesher = dapeyKesherArr.reduce((dafKesher, item) => {\r\n        return {\r\n            ...dafKesher,\r\n            [item['id']]: item,\r\n          };\r\n    }, {});\r\n    \r\n    return {galleries, dapeyKesher};\r\n}\r\n\r\nexport default getGardenData;","import Parse from 'parse';\r\nimport ImageModel from '../model/ImageModel';\r\n\r\nasync function getGalleriesImages(galleries) {\r\n\r\n    const imagesArr = await Promise.all(Object.values(galleries).map(async gallery => {\r\n\r\n        const imgQuery = new Parse.Query(Parse.Object.extend('Image'));\r\n        imgQuery.equalTo(\"gallery\", gallery.parseGallery);\r\n        \r\n        const results = await imgQuery.find();\r\n        const imagesArr = results.map(image => new ImageModel(image));\r\n        \r\n        const imagesObj = imagesArr.reduce((image, item) => {\r\n            return {\r\n                ...image,\r\n                [item['id']]: item,\r\n              };\r\n        }, {});\r\n\r\n        return {'id':gallery.id, 'images':imagesObj};\r\n    }));\r\n    \r\n    const galleriesImagesObj = imagesArr.reduce((gallery, item) => {\r\n        return {\r\n            ...gallery,\r\n            [item['id']]: item,\r\n        };\r\n    }, {});\r\n    \r\n    return (galleriesImagesObj);\r\n\r\n\r\n}\r\nexport default getGalleriesImages;","import 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport { HashRouter, Route, Switch } from 'react-router-dom';\nimport HomePage from './pages/HomePage/HomePage';\nimport MyGardenPage from './pages/MyGardenPage/MyGardenPage';\nimport DapeyKesherPage from './pages/DapeyKesherPage/DapeyKesherPage';\nimport GalleriesPage from './pages/GalleriesPage/GalleriesPage';\nimport ContactUsPage from './pages/ContactUsPage/ContactUsPage';\nimport { useEffect, useState } from 'react';\nimport ActiveUserContext from './utils/ActiveUserContext';\nimport ActiveGardenContext from './utils/ActiveGardenContext';\nimport Parse from 'parse';\nimport UserModel from './model/UserModel';\nimport GalleryPage from './pages/GalleryPage/GalleryPage';\nimport DafKesherPage from './pages/DafKesherPage/DafKesherPage';\nimport TopNavbar from './components/TopNavbar/TopNavbar';\nimport{ init } from 'emailjs-com';\nimport getGardenDetails from './utils/getGardenDetails';\nimport getGardenData from './utils/getGardenData';\nimport getGalleriesImages from './utils/getGalleriesImages';\n\nfunction App() {\n  const [activeUser, setActiveUser] = useState(Parse.User.current() ? new UserModel(Parse.User.current()) : null);\n  const [activeGarden, setActiveGarden] = useState(null);\n  const [gardenData, setGardenData] = useState(null);\n\n  useEffect(() => {\n    async function getGarden(){\n      const garden = await getGardenDetails(activeUser);\n      const data = await getGardenData(garden.parseGarden, activeUser.role);\n      setActiveGarden(garden);\n      setGardenData(data);\n      \n      const images = await getGalleriesImages(data.galleries);\n      const newGalleries = {...data.galleries};\n      Object.keys(images).forEach(gallery => {\n        newGalleries[gallery].images = images[gallery].images;\n      });\n      const newData = {...data};\n      newData.galleries = newGalleries;\n      setGardenData(newData);\n    }\n    activeUser && getGarden();\n  },[activeUser]);\n  \n  init(\"user_AV4NvFTR6vJnUEHOtXINx\");\n  const handleLogin = (loggedinUser) => {\n    setActiveUser(loggedinUser);\n  }\n\n  const handleLogout = () => {\n    setActiveUser(null);\n    Parse.User.logOut();\n  }\n\n  const updateGardenData = (type, content) => {\n    const data = {...gardenData};\n    data[type] = content;\n    setGardenData(data);\n  }\n\n  return (\n    <>\n      <HashRouter>\n        <Switch>\n          <ActiveUserContext.Provider value={activeUser}>\n            <ActiveGardenContext.Provider value={activeGarden}>\n              <TopNavbar onLogout={handleLogout}/>\n              <Route exact path=\"/\"><HomePage onLogin={handleLogin} /></Route>\n              <Route exact path=\"/my-garden\"><MyGardenPage data={gardenData}/></Route>\n              <Route exact path=\"/dapey-kesher\"><DapeyKesherPage data={gardenData} onUpdate={updateGardenData}/></Route>\n              <Route exact path=\"/dapey-kesher/:id\"><DafKesherPage data={gardenData} onUpdate={updateGardenData}/></Route>\n              <Route exact path=\"/galleries\"><GalleriesPage data={gardenData} onUpdate={updateGardenData}/></Route>\n              <Route exact path=\"/galleries/:id\"><GalleryPage data={gardenData} onUpdate={updateGardenData}/></Route>\n              <Route exact path=\"/contact-us\"><ContactUsPage /></Route>\n            </ActiveGardenContext.Provider>\n          </ActiveUserContext.Provider>\n        </Switch>\n      </HashRouter>\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport Parse from \"parse\";\n\nParse.serverURL = 'https://parseapi.back4app.com';\nParse.initialize(\n  'YjX6kib1y4ZL0wYCCXagO161JHCAZNLF8vz04iNh', // This is your Application ID\n  'YYhfXbq4guVCOl4BhV5Jcvfh43NNbDbIpAqI2LzG', // This is your Javascript key\n)\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}